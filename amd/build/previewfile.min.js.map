{"version":3,"file":"previewfile.min.js","sources":["../src/previewfile.js"],"sourcesContent":["/* eslint-disable no-redeclare */\n/* eslint-disable no-undef */\n/* eslint-disable no-unused-vars */\n/* eslint-disable block-scoped-var */\n/* eslint-disable max-len */\nimport $ from \"jquery\";\n\nexport const init = () => {\n    $(\"a[data-type]\").click(function(e) {\n        var modal = `<div class=\"modal fade\" id=\"applyfile\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"applyfileLabel\" aria-modal=\"true\" role=\"dialog\">\n                                                    <div class=\"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable\">\n                                                        <div class=\"modal-content\">\n                                                            <div class=\"modal-header\">\n                                                                <h5 class=\"modal-title\" id=\"applyfileLabel\"></h5>\n                                                                <button   class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                                                <i class=\"fa fa-times\" aria-hidden=\"true\"></i>\n                                                                </button>\n                                                            </div>\n                                                            <div class=\"modal-body p-0 text-center\">\n                                                            </div>\n                                                            <div class=\"modal-footer\">\n                                                                <a href=\"javascript:void(0)\" id=\"forcedownloadbutton\"\n                                                                    class=\"btn btn-primary text-uppercase font-weight-bold\">${M.util.get_string(\"download\", \"enrol_gapply\")}</a>\n                                                                <button class=\"btn btn-secondary text-uppercase font-weight-bold\"\n                                                                    data-dismiss=\"modal\">${M.util.get_string(\"close\", \"enrol_gapply\")}</button>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                            </div>`;\n        // Remove existing modal\n        $(\"#applyfile\").remove();\n        $(\"body\").append(modal);\n        $(\"#applyfileLabel\").html($(this).text());\n        $(\"#applyfile\").modal(\"show\");\n        if ($(this).data(\"type\").includes(\"image\")) {\n            $(\"#applyfile .modal-body\").html(`<img src=\"${$(this).data(\"url\")}\" class=\"img-fluid mx-auto\">`);\n        } else if ($(this).data(\"type\").includes(\"video\")) {\n            $(\"#applyfile .modal-body\").html(`<video src=\"${$(this).data(\"url\")}\"\n                    class=\"embed-responsive-item text-center m-0\" controls width=\"100%\" autoplay></video>`);\n        } else if ($(this).data(\"type\").includes(\"audio\")) {\n            $(\"#applyfile .modal-body\").html(`<audio src=\"${$(this).data(\"url\")}\"\n                    class=\"embed-responsive-item text-center m-0\" controls width=\"100%\" autoplay></audio>`);\n        } else if ($(this).data(\"type\").includes(\"pdf\")) {\n            $(\"#applyfile .modal-body\").html(`<object data=\"${$(this).data(\"url\")}\" type=\"application/pdf\"\n                     width=\"100%\" style=\"height: 80vh\">\n                                            <p>${M.util.get_string('cannotopenpdffile', 'enrol_gapply', $(this).data(\"url\"))}</p>\n                                            </object>`);\n        } else if ($(this).data(\"type\").includes(\"officedocument\") || $(this).data(\"type\").includes(\"msword\")\n            || $(this).data(\"type\").includes(\"ms-excel\") || $(this).data(\"type\").includes(\"ms-powerpoint\") || $(this).data(\"type\").includes(\"openxmlformats\")) {\n            $(\"#applyfile .modal-body\").html(`<iframe id=\"fileviewer\"\n                    src=\"https://view.officeapps.live.com/op/embed.aspx?src=${$(this).data(\"url\")}\"\n                    class=\"embed-responsive-item\" style=\"width: 100%; height: 80vh\"></iframe>`);\n        } else if ($(this).data(\"type\").includes(\"text\") || $(this).data(\"type\").includes(\"csv\")) {\n            $(\"#applyfile .modal-body\").html(`<iframe id=\"fileviewer\"\n                    src=\"https://docs.google.com/viewer?url=${$(this).data(\"url\")}&embedded=true\"\n                    class=\"embed-responsive-item\" style=\"width: 100%; height: 80vh; border-radius: 0\"></iframe>`);\n        } else {\n            $(\"#applyfile .modal-body\").html(`<p\n                    class=\"text-center py-5\">${M.util.get_string('cannotopenfile', 'enrol_gapply', $(this).data(\"url\"))}</p>`);\n        }\n\n        var newURL = new URL($(this).data(\"url\"));\n\n        $(\"#applyfile\").on(\"click\", \"#forcedownloadbutton\", function(e) {\n            newURL.searchParams.append(\"forcedownload\", 1);\n            window.open(newURL.toString());\n        });\n    });\n};"],"names":["click","e","modal","M","util","get_string","remove","append","html","this","text","data","includes","newURL","URL","on","searchParams","window","open","toString"],"mappings":"8OAOoB,yBACd,gBAAgBA,OAAM,SAASC,OACzBC,k9CAakHC,EAAEC,KAAKC,WAAW,WAAY,6PAEjEF,EAAEC,KAAKC,WAAW,QAAS,qSAM5G,cAAcC,6BACd,QAAQC,OAAOL,2BACf,mBAAmBM,MAAK,mBAAEC,MAAMC,4BAChC,cAAcR,MAAM,SAClB,mBAAEO,MAAME,KAAK,QAAQC,SAAS,6BAC5B,0BAA0BJ,0BAAkB,mBAAEC,MAAME,KAAK,yCACpD,mBAAEF,MAAME,KAAK,QAAQC,SAAS,6BACnC,0BAA0BJ,4BAAoB,mBAAEC,MAAME,KAAK,yHAEtD,mBAAEF,MAAME,KAAK,QAAQC,SAAS,6BACnC,0BAA0BJ,4BAAoB,mBAAEC,MAAME,KAAK,yHAEtD,mBAAEF,MAAME,KAAK,QAAQC,SAAS,2BACnC,0BAA0BJ,8BAAsB,mBAAEC,MAAME,KAAK,oJAE1BR,EAAEC,KAAKC,WAAW,oBAAqB,gBAAgB,mBAAEI,MAAME,KAAK,yEAElG,mBAAEF,MAAME,KAAK,QAAQC,SAAS,oBAAqB,mBAAEH,MAAME,KAAK,QAAQC,SAAS,YACrF,mBAAEH,MAAME,KAAK,QAAQC,SAAS,cAAe,mBAAEH,MAAME,KAAK,QAAQC,SAAS,mBAAoB,mBAAEH,MAAME,KAAK,QAAQC,SAAS,sCAC9H,0BAA0BJ,qHACsC,mBAAEC,MAAME,KAAK,6GAExE,mBAAEF,MAAME,KAAK,QAAQC,SAAS,UAAW,mBAAEH,MAAME,KAAK,QAAQC,SAAS,2BAC5E,0BAA0BJ,qGACsB,mBAAEC,MAAME,KAAK,gKAG7D,0BAA0BH,gEACOL,EAAEC,KAAKC,WAAW,iBAAkB,gBAAgB,mBAAEI,MAAME,KAAK,qBAGpGE,OAAS,IAAIC,KAAI,mBAAEL,MAAME,KAAK,4BAEhC,cAAcI,GAAG,QAAS,wBAAwB,SAASd,GACzDY,OAAOG,aAAaT,OAAO,gBAAiB,GAC5CU,OAAOC,KAAKL,OAAOM"}