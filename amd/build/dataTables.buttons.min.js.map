{"version":3,"file":"dataTables.buttons.min.js","sources":["../src/dataTables.buttons.js"],"sourcesContent":["/* eslint-disable */\n/*! Buttons for DataTables 2.4.0\n * Â© SpryMedia Ltd - datatables.net/license\n */\n\n(function( factory ){\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( ['jquery', 'enrol_gapply/jquery.dataTables'], function ( $ ) {\n\t\t\treturn factory( $, window, document );\n\t\t} );\n\t}\n\telse if ( typeof exports === 'object' ) {\n\t\t// CommonJS\n\t\tvar jq = require('jquery');\n\t\tvar cjsRequires = function (root, $) {\n\t\t\tif ( ! $.fn.dataTable ) {\n\t\t\t\trequire('enrol_gapply/jquery.dataTables')(root, $);\n\t\t\t}\n\t\t};\n\n\t\tif (typeof window === 'undefined') {\n\t\t\tmodule.exports = function (root, $) {\n\t\t\t\tif ( ! root ) {\n\t\t\t\t\t// CommonJS environments without a window global must pass a\n\t\t\t\t\t// root. This will give an error otherwise\n\t\t\t\t\troot = window;\n\t\t\t\t}\n\n\t\t\t\tif ( ! $ ) {\n\t\t\t\t\t$ = jq( root );\n\t\t\t\t}\n\n\t\t\t\tcjsRequires( root, $ );\n\t\t\t\treturn factory( $, root, root.document );\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tcjsRequires( window, jq );\n\t\t\tmodule.exports = factory( jq, window, window.document );\n\t\t}\n\t}\n\telse {\n\t\t// Browser\n\t\tfactory( jQuery, window, document );\n\t}\n}(function( $, window, document, undefined ) {\n'use strict';\nvar DataTable = $.fn.dataTable;\n\n\n\n// Used for namespacing events added to the document by each instance, so they\n// can be removed on destroy\nvar _instCounter = 0;\n\n// Button namespacing counter for namespacing events on individual buttons\nvar _buttonCounter = 0;\n\nvar _dtButtons = DataTable.ext.buttons;\n\n// Allow for jQuery slim\nfunction _fadeIn(el, duration, fn) {\n\tif ($.fn.animate) {\n\t\tel.stop().fadeIn(duration, fn);\n\t}\n\telse {\n\t\tel.css('display', 'block');\n\n\t\tif (fn) {\n\t\t\tfn.call(el);\n\t\t}\n\t}\n}\n\nfunction _fadeOut(el, duration, fn) {\n\tif ($.fn.animate) {\n\t\tel.stop().fadeOut(duration, fn);\n\t}\n\telse {\n\t\tel.css('display', 'none');\n\n\t\tif (fn) {\n\t\t\tfn.call(el);\n\t\t}\n\t}\n}\n\n/**\n * [Buttons description]\n * @param {[type]}\n * @param {[type]}\n */\nvar Buttons = function (dt, config) {\n\t// If not created with a `new` keyword then we return a wrapper function that\n\t// will take the settings object for a DT. This allows easy use of new instances\n\t// with the `layout` option - e.g. `topLeft: $.fn.dataTable.Buttons( ... )`.\n\tif (!(this instanceof Buttons)) {\n\t\treturn function (settings) {\n\t\t\treturn new Buttons(settings, dt).container();\n\t\t};\n\t}\n\n\t// If there is no config set it to an empty object\n\tif (typeof config === 'undefined') {\n\t\tconfig = {};\n\t}\n\n\t// Allow a boolean true for defaults\n\tif (config === true) {\n\t\tconfig = {};\n\t}\n\n\t// For easy configuration of buttons an array can be given\n\tif (Array.isArray(config)) {\n\t\tconfig = { buttons: config };\n\t}\n\n\tthis.c = $.extend(true, {}, Buttons.defaults, config);\n\n\t// Don't want a deep copy for the buttons\n\tif (config.buttons) {\n\t\tthis.c.buttons = config.buttons;\n\t}\n\n\tthis.s = {\n\t\tdt: new DataTable.Api(dt),\n\t\tbuttons: [],\n\t\tlistenKeys: '',\n\t\tnamespace: 'dtb' + _instCounter++\n\t};\n\n\tthis.dom = {\n\t\tcontainer: $('<' + this.c.dom.container.tag + '/>').addClass(this.c.dom.container.className)\n\t};\n\n\tthis._constructor();\n};\n\n$.extend(Buttons.prototype, {\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Public methods\n\t */\n\n\t/**\n\t * Get the action of a button\n\t * @param  {int|string} Button index\n\t * @return {function}\n\t */ /**\n\t * Set the action of a button\n\t * @param  {node} node Button element\n\t * @param  {function} action Function to set\n\t * @return {Buttons} Self for chaining\n\t */\n\taction: function (node, action) {\n\t\tvar button = this._nodeToButton(node);\n\n\t\tif (action === undefined) {\n\t\t\treturn button.conf.action;\n\t\t}\n\n\t\tbutton.conf.action = action;\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Add an active class to the button to make to look active or get current\n\t * active state.\n\t * @param  {node} node Button element\n\t * @param  {boolean} [flag] Enable / disable flag\n\t * @return {Buttons} Self for chaining or boolean for getter\n\t */\n\tactive: function (node, flag) {\n\t\tvar button = this._nodeToButton(node);\n\t\tvar klass = this.c.dom.button.active;\n\t\tvar jqNode = $(button.node);\n\n\t\tif (\n\t\t\tbutton.inCollection &&\n\t\t\tthis.c.dom.collection.button &&\n\t\t\tthis.c.dom.collection.button.active !== undefined\n\t\t) {\n\t\t\tklass = this.c.dom.collection.button.active;\n\t\t}\n\n\t\tif (flag === undefined) {\n\t\t\treturn jqNode.hasClass(klass);\n\t\t}\n\n\t\tjqNode.toggleClass(klass, flag === undefined ? true : flag);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Add a new button\n\t * @param {object} config Button configuration object, base string name or function\n\t * @param {int|string} [idx] Button index for where to insert the button\n\t * @param {boolean} [draw=true] Trigger a draw. Set a false when adding\n\t *   lots of buttons, until the last button.\n\t * @return {Buttons} Self for chaining\n\t */\n\tadd: function (config, idx, draw) {\n\t\tvar buttons = this.s.buttons;\n\n\t\tif (typeof idx === 'string') {\n\t\t\tvar split = idx.split('-');\n\t\t\tvar base = this.s;\n\n\t\t\tfor (var i = 0, ien = split.length - 1; i < ien; i++) {\n\t\t\t\tbase = base.buttons[split[i] * 1];\n\t\t\t}\n\n\t\t\tbuttons = base.buttons;\n\t\t\tidx = split[split.length - 1] * 1;\n\t\t}\n\n\t\tthis._expandButton(\n\t\t\tbuttons,\n\t\t\tconfig,\n\t\t\tconfig !== undefined ? config.split : undefined,\n\t\t\t(config === undefined || config.split === undefined || config.split.length === 0) &&\n\t\t\t\tbase !== undefined,\n\t\t\tfalse,\n\t\t\tidx\n\t\t);\n\n\t\tif (draw === undefined || draw === true) {\n\t\t\tthis._draw();\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Clear buttons from a collection and then insert new buttons\n\t */\n\tcollectionRebuild: function (node, newButtons) {\n\t\tvar button = this._nodeToButton(node);\n\n\t\tif (newButtons !== undefined) {\n\t\t\tvar i;\n\t\t\t// Need to reverse the array\n\t\t\tfor (i = button.buttons.length - 1; i >= 0; i--) {\n\t\t\t\tthis.remove(button.buttons[i].node);\n\t\t\t}\n\n\t\t\t// If the collection has prefix and / or postfix buttons we need to add them in\n\t\t\tif (button.conf.prefixButtons) {\n\t\t\t\tnewButtons.unshift.apply(newButtons, button.conf.prefixButtons);\n\t\t\t}\n\n\t\t\tif (button.conf.postfixButtons) {\n\t\t\t\tnewButtons.push.apply(newButtons, button.conf.postfixButtons);\n\t\t\t}\n\n\t\t\tfor (i = 0; i < newButtons.length; i++) {\n\t\t\t\tvar newBtn = newButtons[i];\n\n\t\t\t\tthis._expandButton(\n\t\t\t\t\tbutton.buttons,\n\t\t\t\t\tnewBtn,\n\t\t\t\t\tnewBtn !== undefined &&\n\t\t\t\t\t\tnewBtn.config !== undefined &&\n\t\t\t\t\t\tnewBtn.config.split !== undefined,\n\t\t\t\t\ttrue,\n\t\t\t\t\tnewBtn.parentConf !== undefined && newBtn.parentConf.split !== undefined,\n\t\t\t\t\tnull,\n\t\t\t\t\tnewBtn.parentConf\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis._draw(button.collection, button.buttons);\n\t},\n\n\t/**\n\t * Get the container node for the buttons\n\t * @return {jQuery} Buttons node\n\t */\n\tcontainer: function () {\n\t\treturn this.dom.container;\n\t},\n\n\t/**\n\t * Disable a button\n\t * @param  {node} node Button node\n\t * @return {Buttons} Self for chaining\n\t */\n\tdisable: function (node) {\n\t\tvar button = this._nodeToButton(node);\n\n\t\t$(button.node).addClass(this.c.dom.button.disabled).prop('disabled', true);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Destroy the instance, cleaning up event handlers and removing DOM\n\t * elements\n\t * @return {Buttons} Self for chaining\n\t */\n\tdestroy: function () {\n\t\t// Key event listener\n\t\t$('body').off('keyup.' + this.s.namespace);\n\n\t\t// Individual button destroy (so they can remove their own events if\n\t\t// needed). Take a copy as the array is modified by `remove`\n\t\tvar buttons = this.s.buttons.slice();\n\t\tvar i, ien;\n\n\t\tfor (i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tthis.remove(buttons[i].node);\n\t\t}\n\n\t\t// Container\n\t\tthis.dom.container.remove();\n\n\t\t// Remove from the settings object collection\n\t\tvar buttonInsts = this.s.dt.settings()[0];\n\n\t\tfor (i = 0, ien = buttonInsts.length; i < ien; i++) {\n\t\t\tif (buttonInsts.inst === this) {\n\t\t\t\tbuttonInsts.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Enable / disable a button\n\t * @param  {node} node Button node\n\t * @param  {boolean} [flag=true] Enable / disable flag\n\t * @return {Buttons} Self for chaining\n\t */\n\tenable: function (node, flag) {\n\t\tif (flag === false) {\n\t\t\treturn this.disable(node);\n\t\t}\n\n\t\tvar button = this._nodeToButton(node);\n\t\t$(button.node).removeClass(this.c.dom.button.disabled).prop('disabled', false);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Get a button's index\n\t *\n\t * This is internally recursive\n\t * @param {element} node Button to get the index of\n\t * @return {string} Button index\n\t */\n\tindex: function (node, nested, buttons) {\n\t\tif (!nested) {\n\t\t\tnested = '';\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tvar inner = buttons[i].buttons;\n\n\t\t\tif (buttons[i].node === node) {\n\t\t\t\treturn nested + i;\n\t\t\t}\n\n\t\t\tif (inner && inner.length) {\n\t\t\t\tvar match = this.index(node, i + '-', inner);\n\n\t\t\t\tif (match !== null) {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Get the instance name for the button set selector\n\t * @return {string} Instance name\n\t */\n\tname: function () {\n\t\treturn this.c.name;\n\t},\n\n\t/**\n\t * Get a button's node of the buttons container if no button is given\n\t * @param  {node} [node] Button node\n\t * @return {jQuery} Button element, or container\n\t */\n\tnode: function (node) {\n\t\tif (!node) {\n\t\t\treturn this.dom.container;\n\t\t}\n\n\t\tvar button = this._nodeToButton(node);\n\t\treturn $(button.node);\n\t},\n\n\t/**\n\t * Set / get a processing class on the selected button\n\t * @param {element} node Triggering button node\n\t * @param  {boolean} flag true to add, false to remove, undefined to get\n\t * @return {boolean|Buttons} Getter value or this if a setter.\n\t */\n\tprocessing: function (node, flag) {\n\t\tvar dt = this.s.dt;\n\t\tvar button = this._nodeToButton(node);\n\n\t\tif (flag === undefined) {\n\t\t\treturn $(button.node).hasClass('processing');\n\t\t}\n\n\t\t$(button.node).toggleClass('processing', flag);\n\n\t\t$(dt.table().node()).triggerHandler('buttons-processing.dt', [\n\t\t\tflag,\n\t\t\tdt.button(node),\n\t\t\tdt,\n\t\t\t$(node),\n\t\t\tbutton.conf\n\t\t]);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Remove a button.\n\t * @param  {node} node Button node\n\t * @return {Buttons} Self for chaining\n\t */\n\tremove: function (node) {\n\t\tvar button = this._nodeToButton(node);\n\t\tvar host = this._nodeToHost(node);\n\t\tvar dt = this.s.dt;\n\n\t\t// Remove any child buttons first\n\t\tif (button.buttons.length) {\n\t\t\tfor (var i = button.buttons.length - 1; i >= 0; i--) {\n\t\t\t\tthis.remove(button.buttons[i].node);\n\t\t\t}\n\t\t}\n\n\t\tbutton.conf.destroying = true;\n\n\t\t// Allow the button to remove event handlers, etc\n\t\tif (button.conf.destroy) {\n\t\t\tbutton.conf.destroy.call(dt.button(node), dt, $(node), button.conf);\n\t\t}\n\n\t\tthis._removeKey(button.conf);\n\n\t\t$(button.node).remove();\n\n\t\tvar idx = $.inArray(button, host);\n\t\thost.splice(idx, 1);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Get the text for a button\n\t * @param  {int|string} node Button index\n\t * @return {string} Button text\n\t */ /**\n\t * Set the text for a button\n\t * @param  {int|string|function} node Button index\n\t * @param  {string} label Text\n\t * @return {Buttons} Self for chaining\n\t */\n\ttext: function (node, label) {\n\t\tvar button = this._nodeToButton(node);\n\t\tvar textNode = button.textNode;\n\t\tvar dt = this.s.dt;\n\t\tvar jqNode = $(button.node);\n\t\tvar text = function (opt) {\n\t\t\treturn typeof opt === 'function' ? opt(dt, jqNode, button.conf) : opt;\n\t\t};\n\n\t\tif (label === undefined) {\n\t\t\treturn text(button.conf.text);\n\t\t}\n\n\t\tbutton.conf.text = label;\n\t\ttextNode.html(text(label));\n\n\t\treturn this;\n\t},\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Constructor\n\t */\n\n\t/**\n\t * Buttons constructor\n\t * @private\n\t */\n\t_constructor: function () {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar dtSettings = dt.settings()[0];\n\t\tvar buttons = this.c.buttons;\n\n\t\tif (!dtSettings._buttons) {\n\t\t\tdtSettings._buttons = [];\n\t\t}\n\n\t\tdtSettings._buttons.push({\n\t\t\tinst: this,\n\t\t\tname: this.c.name\n\t\t});\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tthis.add(buttons[i]);\n\t\t}\n\n\t\tdt.on('destroy', function (e, settings) {\n\t\t\tif (settings === dtSettings) {\n\t\t\t\tthat.destroy();\n\t\t\t}\n\t\t});\n\n\t\t// Global key event binding to listen for button keys\n\t\t$('body').on('keyup.' + this.s.namespace, function (e) {\n\t\t\tif (!document.activeElement || document.activeElement === document.body) {\n\t\t\t\t// SUse a string of characters for fast lookup of if we need to\n\t\t\t\t// handle this\n\t\t\t\tvar character = String.fromCharCode(e.keyCode).toLowerCase();\n\n\t\t\t\tif (that.s.listenKeys.toLowerCase().indexOf(character) !== -1) {\n\t\t\t\t\tthat._keypress(character, e);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Private methods\n\t */\n\n\t/**\n\t * Add a new button to the key press listener\n\t * @param {object} conf Resolved button configuration object\n\t * @private\n\t */\n\t_addKey: function (conf) {\n\t\tif (conf.key) {\n\t\t\tthis.s.listenKeys += $.isPlainObject(conf.key) ? conf.key.key : conf.key;\n\t\t}\n\t},\n\n\t/**\n\t * Insert the buttons into the container. Call without parameters!\n\t * @param  {node} [container] Recursive only - Insert point\n\t * @param  {array} [buttons] Recursive only - Buttons array\n\t * @private\n\t */\n\t_draw: function (container, buttons) {\n\t\tif (!container) {\n\t\t\tcontainer = this.dom.container;\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tcontainer.children().detach();\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tcontainer.append(buttons[i].inserter);\n\t\t\tcontainer.append(' ');\n\n\t\t\tif (buttons[i].buttons && buttons[i].buttons.length) {\n\t\t\t\tthis._draw(buttons[i].collection, buttons[i].buttons);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Create buttons from an array of buttons\n\t * @param  {array} attachTo Buttons array to attach to\n\t * @param  {object} button Button definition\n\t * @param  {boolean} inCollection true if the button is in a collection\n\t * @private\n\t */\n\t_expandButton: function (\n\t\tattachTo,\n\t\tbutton,\n\t\tsplit,\n\t\tinCollection,\n\t\tinSplit,\n\t\tattachPoint,\n\t\tparentConf\n\t) {\n\t\tvar dt = this.s.dt;\n\t\tvar isSplit = false;\n\t\tvar domCollection = this.c.dom.collection;\n\t\tvar buttons = !Array.isArray(button) ? [button] : button;\n\n\t\tif (button === undefined) {\n\t\t\tbuttons = !Array.isArray(split) ? [split] : split;\n\t\t}\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tvar conf = this._resolveExtends(buttons[i]);\n\n\t\t\tif (!conf) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tisSplit = conf.config && conf.config.split ? true : false;\n\n\t\t\t// If the configuration is an array, then expand the buttons at this\n\t\t\t// point\n\t\t\tif (Array.isArray(conf)) {\n\t\t\t\tthis._expandButton(\n\t\t\t\t\tattachTo,\n\t\t\t\t\tconf,\n\t\t\t\t\tbuilt !== undefined && built.conf !== undefined ? built.conf.split : undefined,\n\t\t\t\t\tinCollection,\n\t\t\t\t\tparentConf !== undefined && parentConf.split !== undefined,\n\t\t\t\t\tattachPoint,\n\t\t\t\t\tparentConf\n\t\t\t\t);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar built = this._buildButton(\n\t\t\t\tconf,\n\t\t\t\tinCollection,\n\t\t\t\tconf.split !== undefined ||\n\t\t\t\t\t(conf.config !== undefined && conf.config.split !== undefined),\n\t\t\t\tinSplit\n\t\t\t);\n\t\t\tif (!built) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (attachPoint !== undefined && attachPoint !== null) {\n\t\t\t\tattachTo.splice(attachPoint, 0, built);\n\t\t\t\tattachPoint++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tattachTo.push(built);\n\t\t\t}\n\n\t\t\t// Create the dropdown for a collection\n\t\t\tif (built.conf.buttons) {\n\t\t\t\tbuilt.collection = $('<' + domCollection.container.content.tag + '/>');\n\t\t\t\tbuilt.conf._collection = built.collection;\n\n\t\t\t\t$(built.node).append(domCollection.action.dropHtml);\n\n\t\t\t\tthis._expandButton(\n\t\t\t\t\tbuilt.buttons,\n\t\t\t\t\tbuilt.conf.buttons,\n\t\t\t\t\tbuilt.conf.split,\n\t\t\t\t\t!isSplit,\n\t\t\t\t\tisSplit,\n\t\t\t\t\tattachPoint,\n\t\t\t\t\tbuilt.conf\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// And the split collection\n\t\t\tif (built.conf.split) {\n\t\t\t\tbuilt.collection = $('<' + domCollection.container.tag + '/>');\n\t\t\t\tbuilt.conf._collection = built.collection;\n\n\t\t\t\tfor (var j = 0; j < built.conf.split.length; j++) {\n\t\t\t\t\tvar item = built.conf.split[j];\n\n\t\t\t\t\tif (typeof item === 'object') {\n\t\t\t\t\t\titem.parent = parentConf;\n\n\t\t\t\t\t\tif (item.collectionLayout === undefined) {\n\t\t\t\t\t\t\titem.collectionLayout = built.conf.collectionLayout;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (item.dropup === undefined) {\n\t\t\t\t\t\t\titem.dropup = built.conf.dropup;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (item.fade === undefined) {\n\t\t\t\t\t\t\titem.fade = built.conf.fade;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._expandButton(\n\t\t\t\t\tbuilt.buttons,\n\t\t\t\t\tbuilt.conf.buttons,\n\t\t\t\t\tbuilt.conf.split,\n\t\t\t\t\t!isSplit,\n\t\t\t\t\tisSplit,\n\t\t\t\t\tattachPoint,\n\t\t\t\t\tbuilt.conf\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tbuilt.conf.parent = parentConf;\n\n\t\t\t// init call is made here, rather than buildButton as it needs to\n\t\t\t// be selectable, and for that it needs to be in the buttons array\n\t\t\tif (conf.init) {\n\t\t\t\tconf.init.call(dt.button(built.node), dt, $(built.node), conf);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Create an individual button\n\t * @param  {object} config            Resolved button configuration\n\t * @param  {boolean} inCollection `true` if a collection button\n\t * @return {object} Completed button description object\n\t * @private\n\t */\n\t_buildButton: function (config, inCollection, isSplit, inSplit) {\n\t\tvar configDom = this.c.dom;\n\t\tvar textNode;\n\t\tvar dt = this.s.dt;\n\t\tvar text = function (opt) {\n\t\t\treturn typeof opt === 'function' ? opt(dt, button, config) : opt;\n\t\t};\n\n\t\t// Create an object that describes the button which can be in `dom.button`, or\n\t\t// `dom.collection.button` or `dom.split.button` or `dom.collection.split.button`!\n\t\t// Each should extend from `dom.button`.\n\t\tvar dom = $.extend(true, {}, configDom.button);\n\n\t\tif (inCollection && isSplit && configDom.collection.split) {\n\t\t\t$.extend(true, dom, configDom.collection.split.action);\n\t\t}\n\t\telse if (inSplit || inCollection) {\n\t\t\t$.extend(true, dom, configDom.collection.button);\n\t\t}\n\t\telse if (isSplit) {\n\t\t\t$.extend(true, dom, configDom.split.button);\n\t\t}\n\n\t\t// Spacers don't do much other than insert an element into the DOM\n\t\tif (config.spacer) {\n\t\t\tvar spacer = $('<' + dom.spacer.tag + '/>')\n\t\t\t\t.addClass('dt-button-spacer ' + config.style + ' ' + dom.spacer.className)\n\t\t\t\t.html(text(config.text));\n\n\t\t\treturn {\n\t\t\t\tconf: config,\n\t\t\t\tnode: spacer,\n\t\t\t\tinserter: spacer,\n\t\t\t\tbuttons: [],\n\t\t\t\tinCollection: inCollection,\n\t\t\t\tisSplit: isSplit,\n\t\t\t\tcollection: null,\n\t\t\t\ttextNode: spacer\n\t\t\t};\n\t\t}\n\n\t\t// Make sure that the button is available based on whatever requirements\n\t\t// it has. For example, PDF button require pdfmake\n\t\tif (config.available && !config.available(dt, config) && !config.hasOwnProperty('html')) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar button;\n\n\t\tif (!config.hasOwnProperty('html')) {\n\t\t\tvar action = function (e, dt, button, config) {\n\t\t\t\tconfig.action.call(dt.button(button), e, dt, button, config);\n\n\t\t\t\t$(dt.table().node()).triggerHandler('buttons-action.dt', [\n\t\t\t\t\tdt.button(button),\n\t\t\t\t\tdt,\n\t\t\t\t\tbutton,\n\t\t\t\t\tconfig\n\t\t\t\t]);\n\t\t\t};\n\n\t\t\tvar tag = config.tag || dom.tag;\n\t\t\tvar clickBlurs = config.clickBlurs === undefined ? true : config.clickBlurs;\n\n\t\t\tbutton = $('<' + tag + '/>')\n\t\t\t\t.addClass(dom.className)\n\t\t\t\t.attr('tabindex', this.s.dt.settings()[0].iTabIndex)\n\t\t\t\t.attr('aria-controls', this.s.dt.table().node().id)\n\t\t\t\t.on('click.dtb', function (e) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif (!button.hasClass(dom.disabled) && config.action) {\n\t\t\t\t\t\taction(e, dt, button, config);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (clickBlurs) {\n\t\t\t\t\t\tbutton.trigger('blur');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('keypress.dtb', function (e) {\n\t\t\t\t\tif (e.keyCode === 13) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tif (!button.hasClass(dom.disabled) && config.action) {\n\t\t\t\t\t\t\taction(e, dt, button, config);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t// Make `a` tags act like a link\n\t\t\tif (tag.toLowerCase() === 'a') {\n\t\t\t\tbutton.attr('href', '#');\n\t\t\t}\n\n\t\t\t// Button tags should have `type=button` so they don't have any default behaviour\n\t\t\tif (tag.toLowerCase() === 'button') {\n\t\t\t\tbutton.attr('type', 'button');\n\t\t\t}\n\n\t\t\tif (dom.liner.tag) {\n\t\t\t\tvar liner = $('<' + dom.liner.tag + '/>')\n\t\t\t\t\t.html(text(config.text))\n\t\t\t\t\t.addClass(dom.liner.className);\n\n\t\t\t\tif (dom.liner.tag.toLowerCase() === 'a') {\n\t\t\t\t\tliner.attr('href', '#');\n\t\t\t\t}\n\n\t\t\t\tbutton.append(liner);\n\t\t\t\ttextNode = liner;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbutton.html(text(config.text));\n\t\t\t\ttextNode = button;\n\t\t\t}\n\n\t\t\tif (config.enabled === false) {\n\t\t\t\tbutton.addClass(dom.disabled);\n\t\t\t}\n\n\t\t\tif (config.className) {\n\t\t\t\tbutton.addClass(config.className);\n\t\t\t}\n\n\t\t\tif (config.titleAttr) {\n\t\t\t\tbutton.attr('title', text(config.titleAttr));\n\t\t\t}\n\n\t\t\tif (config.attr) {\n\t\t\t\tbutton.attr(config.attr);\n\t\t\t}\n\n\t\t\tif (!config.namespace) {\n\t\t\t\tconfig.namespace = '.dt-button-' + _buttonCounter++;\n\t\t\t}\n\n\t\t\tif (config.config !== undefined && config.config.split) {\n\t\t\t\tconfig.split = config.config.split;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tbutton = $(config.html);\n\t\t}\n\n\t\tvar buttonContainer = this.c.dom.buttonContainer;\n\t\tvar inserter;\n\t\tif (buttonContainer && buttonContainer.tag) {\n\t\t\tinserter = $('<' + buttonContainer.tag + '/>')\n\t\t\t\t.addClass(buttonContainer.className)\n\t\t\t\t.append(button);\n\t\t}\n\t\telse {\n\t\t\tinserter = button;\n\t\t}\n\n\t\tthis._addKey(config);\n\n\t\t// Style integration callback for DOM manipulation\n\t\t// Note that this is _not_ documented. It is currently\n\t\t// for style integration only\n\t\tif (this.c.buttonCreated) {\n\t\t\tinserter = this.c.buttonCreated(config, inserter);\n\t\t}\n\n\t\tvar splitDiv;\n\n\t\tif (isSplit) {\n\t\t\tvar dropdownConf = inCollection\n\t\t\t\t? $.extend(true, this.c.dom.split, this.c.dom.collection.split)\n\t\t\t\t: this.c.dom.split;\n\t\t\tvar wrapperConf = dropdownConf.wrapper;\n\n\t\t\tsplitDiv = $('<' + wrapperConf.tag + '/>')\n\t\t\t\t.addClass(wrapperConf.className)\n\t\t\t\t.append(button);\n\n\t\t\tvar dropButtonConfig = $.extend(config, {\n\t\t\t\talign: dropdownConf.dropdown.align,\n\t\t\t\tattr: {\n\t\t\t\t\t'aria-haspopup': 'dialog',\n\t\t\t\t\t'aria-expanded': false\n\t\t\t\t},\n\t\t\t\tclassName: dropdownConf.dropdown.className,\n\t\t\t\tcloseButton: false,\n\t\t\t\tsplitAlignClass: dropdownConf.dropdown.splitAlignClass,\n\t\t\t\ttext: dropdownConf.dropdown.text\n\t\t\t});\n\n\t\t\tthis._addKey(dropButtonConfig);\n\n\t\t\tvar splitAction = function (e, dt, button, config) {\n\t\t\t\t_dtButtons.split.action.call(dt.button(splitDiv), e, dt, button, config);\n\n\t\t\t\t$(dt.table().node()).triggerHandler('buttons-action.dt', [\n\t\t\t\t\tdt.button(button),\n\t\t\t\t\tdt,\n\t\t\t\t\tbutton,\n\t\t\t\t\tconfig\n\t\t\t\t]);\n\t\t\t\tbutton.attr('aria-expanded', true);\n\t\t\t};\n\n\t\t\tvar dropButton = $(\n\t\t\t\t'<button class=\"' + dropdownConf.dropdown.className + ' dt-button\"></button>'\n\t\t\t)\n\t\t\t\t.html(dropdownConf.dropdown.dropHtml)\n\t\t\t\t.on('click.dtb', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\tif (!dropButton.hasClass(dom.disabled)) {\n\t\t\t\t\t\tsplitAction(e, dt, dropButton, dropButtonConfig);\n\t\t\t\t\t}\n\t\t\t\t\tif (clickBlurs) {\n\t\t\t\t\t\tdropButton.trigger('blur');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('keypress.dtb', function (e) {\n\t\t\t\t\tif (e.keyCode === 13) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tif (!dropButton.hasClass(dom.disabled)) {\n\t\t\t\t\t\t\tsplitAction(e, dt, dropButton, dropButtonConfig);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tif (config.split.length === 0) {\n\t\t\t\tdropButton.addClass('dtb-hide-drop');\n\t\t\t}\n\n\t\t\tsplitDiv.append(dropButton).attr(dropButtonConfig.attr);\n\t\t}\n\n\t\treturn {\n\t\t\tconf: config,\n\t\t\tnode: isSplit ? splitDiv.get(0) : button.get(0),\n\t\t\tinserter: isSplit ? splitDiv : inserter,\n\t\t\tbuttons: [],\n\t\t\tinCollection: inCollection,\n\t\t\tisSplit: isSplit,\n\t\t\tinSplit: inSplit,\n\t\t\tcollection: null,\n\t\t\ttextNode: textNode\n\t\t};\n\t},\n\n\t/**\n\t * Get the button object from a node (recursive)\n\t * @param  {node} node Button node\n\t * @param  {array} [buttons] Button array, uses base if not defined\n\t * @return {object} Button object\n\t * @private\n\t */\n\t_nodeToButton: function (node, buttons) {\n\t\tif (!buttons) {\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tif (buttons[i].node === node) {\n\t\t\t\treturn buttons[i];\n\t\t\t}\n\n\t\t\tif (buttons[i].buttons.length) {\n\t\t\t\tvar ret = this._nodeToButton(node, buttons[i].buttons);\n\n\t\t\t\tif (ret) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Get container array for a button from a button node (recursive)\n\t * @param  {node} node Button node\n\t * @param  {array} [buttons] Button array, uses base if not defined\n\t * @return {array} Button's host array\n\t * @private\n\t */\n\t_nodeToHost: function (node, buttons) {\n\t\tif (!buttons) {\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tif (buttons[i].node === node) {\n\t\t\t\treturn buttons;\n\t\t\t}\n\n\t\t\tif (buttons[i].buttons.length) {\n\t\t\t\tvar ret = this._nodeToHost(node, buttons[i].buttons);\n\n\t\t\t\tif (ret) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Handle a key press - determine if any button's key configured matches\n\t * what was typed and trigger the action if so.\n\t * @param  {string} character The character pressed\n\t * @param  {object} e Key event that triggered this call\n\t * @private\n\t */\n\t_keypress: function (character, e) {\n\t\t// Check if this button press already activated on another instance of Buttons\n\t\tif (e._buttonsHandled) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar run = function (conf, node) {\n\t\t\tif (!conf.key) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (conf.key === character) {\n\t\t\t\te._buttonsHandled = true;\n\t\t\t\t$(node).click();\n\t\t\t}\n\t\t\telse if ($.isPlainObject(conf.key)) {\n\t\t\t\tif (conf.key.key !== character) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (conf.key.shiftKey && !e.shiftKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (conf.key.altKey && !e.altKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (conf.key.ctrlKey && !e.ctrlKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (conf.key.metaKey && !e.metaKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Made it this far - it is good\n\t\t\t\te._buttonsHandled = true;\n\t\t\t\t$(node).click();\n\t\t\t}\n\t\t};\n\n\t\tvar recurse = function (a) {\n\t\t\tfor (var i = 0, ien = a.length; i < ien; i++) {\n\t\t\t\trun(a[i].conf, a[i].node);\n\n\t\t\t\tif (a[i].buttons.length) {\n\t\t\t\t\trecurse(a[i].buttons);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\trecurse(this.s.buttons);\n\t},\n\n\t/**\n\t * Remove a key from the key listener for this instance (to be used when a\n\t * button is removed)\n\t * @param  {object} conf Button configuration\n\t * @private\n\t */\n\t_removeKey: function (conf) {\n\t\tif (conf.key) {\n\t\t\tvar character = $.isPlainObject(conf.key) ? conf.key.key : conf.key;\n\n\t\t\t// Remove only one character, as multiple buttons could have the\n\t\t\t// same listening key\n\t\t\tvar a = this.s.listenKeys.split('');\n\t\t\tvar idx = $.inArray(character, a);\n\t\t\ta.splice(idx, 1);\n\t\t\tthis.s.listenKeys = a.join('');\n\t\t}\n\t},\n\n\t/**\n\t * Resolve a button configuration\n\t * @param  {string|function|object} conf Button config to resolve\n\t * @return {object} Button configuration\n\t * @private\n\t */\n\t_resolveExtends: function (conf) {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar i, ien;\n\t\tvar toConfObject = function (base) {\n\t\t\tvar loop = 0;\n\n\t\t\t// Loop until we have resolved to a button configuration, or an\n\t\t\t// array of button configurations (which will be iterated\n\t\t\t// separately)\n\t\t\twhile (!$.isPlainObject(base) && !Array.isArray(base)) {\n\t\t\t\tif (base === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (typeof base === 'function') {\n\t\t\t\t\tbase = base.call(that, dt, conf);\n\n\t\t\t\t\tif (!base) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (typeof base === 'string') {\n\t\t\t\t\tif (!_dtButtons[base]) {\n\t\t\t\t\t\treturn { html: base };\n\t\t\t\t\t}\n\n\t\t\t\t\tbase = _dtButtons[base];\n\t\t\t\t}\n\n\t\t\t\tloop++;\n\t\t\t\tif (loop > 30) {\n\t\t\t\t\t// Protect against misconfiguration killing the browser\n\t\t\t\t\tthrow 'Buttons: Too many iterations';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn Array.isArray(base) ? base : $.extend({}, base);\n\t\t};\n\n\t\tconf = toConfObject(conf);\n\n\t\twhile (conf && conf.extend) {\n\t\t\t// Use `toConfObject` in case the button definition being extended\n\t\t\t// is itself a string or a function\n\t\t\tif (!_dtButtons[conf.extend]) {\n\t\t\t\tthrow 'Cannot extend unknown button type: ' + conf.extend;\n\t\t\t}\n\n\t\t\tvar objArray = toConfObject(_dtButtons[conf.extend]);\n\t\t\tif (Array.isArray(objArray)) {\n\t\t\t\treturn objArray;\n\t\t\t}\n\t\t\telse if (!objArray) {\n\t\t\t\t// This is a little brutal as it might be possible to have a\n\t\t\t\t// valid button without the extend, but if there is no extend\n\t\t\t\t// then the host button would be acting in an undefined state\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Stash the current class name\n\t\t\tvar originalClassName = objArray.className;\n\n\t\t\tif (conf.config !== undefined && objArray.config !== undefined) {\n\t\t\t\tconf.config = $.extend({}, objArray.config, conf.config);\n\t\t\t}\n\n\t\t\tconf = $.extend({}, objArray, conf);\n\n\t\t\t// The extend will have overwritten the original class name if the\n\t\t\t// `conf` object also assigned a class, but we want to concatenate\n\t\t\t// them so they are list that is combined from all extended buttons\n\t\t\tif (originalClassName && conf.className !== originalClassName) {\n\t\t\t\tconf.className = originalClassName + ' ' + conf.className;\n\t\t\t}\n\n\t\t\t// Although we want the `conf` object to overwrite almost all of\n\t\t\t// the properties of the object being extended, the `extend`\n\t\t\t// property should come from the object being extended\n\t\t\tconf.extend = objArray.extend;\n\t\t}\n\n\t\t// Buttons to be added to a collection  -gives the ability to define\n\t\t// if buttons should be added to the start or end of a collection\n\t\tvar postfixButtons = conf.postfixButtons;\n\t\tif (postfixButtons) {\n\t\t\tif (!conf.buttons) {\n\t\t\t\tconf.buttons = [];\n\t\t\t}\n\n\t\t\tfor (i = 0, ien = postfixButtons.length; i < ien; i++) {\n\t\t\t\tconf.buttons.push(postfixButtons[i]);\n\t\t\t}\n\t\t}\n\n\t\tvar prefixButtons = conf.prefixButtons;\n\t\tif (prefixButtons) {\n\t\t\tif (!conf.buttons) {\n\t\t\t\tconf.buttons = [];\n\t\t\t}\n\n\t\t\tfor (i = 0, ien = prefixButtons.length; i < ien; i++) {\n\t\t\t\tconf.buttons.splice(i, 0, prefixButtons[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn conf;\n\t},\n\n\t/**\n\t * Display (and replace if there is an existing one) a popover attached to a button\n\t * @param {string|node} content Content to show\n\t * @param {DataTable.Api} hostButton DT API instance of the button\n\t * @param {object} inOpts Options (see object below for all options)\n\t */\n\t_popover: function (content, hostButton, inOpts, e) {\n\t\tvar dt = hostButton;\n\t\tvar c = this.c;\n\t\tvar closed = false;\n\t\tvar options = $.extend(\n\t\t\t{\n\t\t\t\talign: 'button-left', // button-right, dt-container, split-left, split-right\n\t\t\t\tautoClose: false,\n\t\t\t\tbackground: true,\n\t\t\t\tbackgroundClassName: 'dt-button-background',\n\t\t\t\tcloseButton: true,\n\t\t\t\tcontainerClassName: c.dom.collection.container.className,\n\t\t\t\tcontentClassName: c.dom.collection.container.content.className,\n\t\t\t\tcollectionLayout: '',\n\t\t\t\tcollectionTitle: '',\n\t\t\t\tdropup: false,\n\t\t\t\tfade: 400,\n\t\t\t\tpopoverTitle: '',\n\t\t\t\trightAlignClassName: 'dt-button-right',\n\t\t\t\ttag: c.dom.collection.container.tag\n\t\t\t},\n\t\t\tinOpts\n\t\t);\n\n\t\tvar containerSelector = options.tag + '.' + options.containerClassName.replace(/ /g, '.');\n\t\tvar hostNode = hostButton.node();\n\n\t\tvar close = function () {\n\t\t\tclosed = true;\n\n\t\t\t_fadeOut($(containerSelector), options.fade, function () {\n\t\t\t\t$(this).detach();\n\t\t\t});\n\n\t\t\t$(dt.buttons('[aria-haspopup=\"dialog\"][aria-expanded=\"true\"]').nodes()).attr(\n\t\t\t\t'aria-expanded',\n\t\t\t\t'false'\n\t\t\t);\n\n\t\t\t$('div.dt-button-background').off('click.dtb-collection');\n\t\t\tButtons.background(false, options.backgroundClassName, options.fade, hostNode);\n\n\t\t\t$(window).off('resize.resize.dtb-collection');\n\t\t\t$('body').off('.dtb-collection');\n\t\t\tdt.off('buttons-action.b-internal');\n\t\t\tdt.off('destroy');\n\t\t};\n\n\t\tif (content === false) {\n\t\t\tclose();\n\t\t\treturn;\n\t\t}\n\n\t\tvar existingExpanded = $(\n\t\t\tdt.buttons('[aria-haspopup=\"dialog\"][aria-expanded=\"true\"]').nodes()\n\t\t);\n\t\tif (existingExpanded.length) {\n\t\t\t// Reuse the current position if the button that was triggered is inside an existing collection\n\t\t\tif (hostNode.closest(containerSelector).length) {\n\t\t\t\thostNode = existingExpanded.eq(0);\n\t\t\t}\n\n\t\t\tclose();\n\t\t}\n\n\t\t// Try to be smart about the layout\n\t\tvar cnt = $('.dt-button', content).length;\n\t\tvar mod = '';\n\n\t\tif (cnt === 3) {\n\t\t\tmod = 'dtb-b3';\n\t\t}\n\t\telse if (cnt === 2) {\n\t\t\tmod = 'dtb-b2';\n\t\t}\n\t\telse if (cnt === 1) {\n\t\t\tmod = 'dtb-b1';\n\t\t}\n\n\t\tvar display = $('<' + options.tag + '/>')\n\t\t\t.addClass(options.containerClassName)\n\t\t\t.addClass(options.collectionLayout)\n\t\t\t.addClass(options.splitAlignClass)\n\t\t\t.addClass(mod)\n\t\t\t.css('display', 'none')\n\t\t\t.attr({\n\t\t\t\t'aria-modal': true,\n\t\t\t\trole: 'dialog'\n\t\t\t});\n\n\t\tcontent = $(content)\n\t\t\t.addClass(options.contentClassName)\n\t\t\t.attr('role', 'menu')\n\t\t\t.appendTo(display);\n\n\t\thostNode.attr('aria-expanded', 'true');\n\n\t\tif (hostNode.parents('body')[0] !== document.body) {\n\t\t\thostNode = document.body.lastChild;\n\t\t}\n\n\t\tif (options.popoverTitle) {\n\t\t\tdisplay.prepend(\n\t\t\t\t'<div class=\"dt-button-collection-title\">' + options.popoverTitle + '</div>'\n\t\t\t);\n\t\t}\n\t\telse if (options.collectionTitle) {\n\t\t\tdisplay.prepend(\n\t\t\t\t'<div class=\"dt-button-collection-title\">' + options.collectionTitle + '</div>'\n\t\t\t);\n\t\t}\n\n\t\tif (options.closeButton) {\n\t\t\tdisplay\n\t\t\t\t.prepend('<div class=\"dtb-popover-close\">&times;</div>')\n\t\t\t\t.addClass('dtb-collection-closeable');\n\t\t}\n\n\t\t_fadeIn(display.insertAfter(hostNode), options.fade);\n\n\t\tvar tableContainer = $(hostButton.table().container());\n\t\tvar position = display.css('position');\n\n\t\tif (options.span === 'container' || options.align === 'dt-container') {\n\t\t\thostNode = hostNode.parent();\n\t\t\tdisplay.css('width', tableContainer.width());\n\t\t}\n\n\t\t// Align the popover relative to the DataTables container\n\t\t// Useful for wide popovers such as SearchPanes\n\t\tif (position === 'absolute') {\n\t\t\t// Align relative to the host button\n\t\t\tvar offsetParent = $(hostNode[0].offsetParent);\n\t\t\tvar buttonPosition = hostNode.position();\n\t\t\tvar buttonOffset = hostNode.offset();\n\t\t\tvar tableSizes = offsetParent.offset();\n\t\t\tvar containerPosition = offsetParent.position();\n\t\t\tvar computed = window.getComputedStyle(offsetParent[0]);\n\n\t\t\ttableSizes.height = offsetParent.outerHeight();\n\t\t\ttableSizes.width = offsetParent.width() + parseFloat(computed.paddingLeft);\n\t\t\ttableSizes.right = tableSizes.left + tableSizes.width;\n\t\t\ttableSizes.bottom = tableSizes.top + tableSizes.height;\n\n\t\t\t// Set the initial position so we can read height / width\n\t\t\tvar top = buttonPosition.top + hostNode.outerHeight();\n\t\t\tvar left = buttonPosition.left;\n\n\t\t\tdisplay.css({\n\t\t\t\ttop: top,\n\t\t\t\tleft: left\n\t\t\t});\n\n\t\t\t// Get the popover position\n\t\t\tcomputed = window.getComputedStyle(display[0]);\n\t\t\tvar popoverSizes = display.offset();\n\n\t\t\tpopoverSizes.height = display.outerHeight();\n\t\t\tpopoverSizes.width = display.outerWidth();\n\t\t\tpopoverSizes.right = popoverSizes.left + popoverSizes.width;\n\t\t\tpopoverSizes.bottom = popoverSizes.top + popoverSizes.height;\n\t\t\tpopoverSizes.marginTop = parseFloat(computed.marginTop);\n\t\t\tpopoverSizes.marginBottom = parseFloat(computed.marginBottom);\n\n\t\t\t// First position per the class requirements - pop up and right align\n\t\t\tif (options.dropup) {\n\t\t\t\ttop =\n\t\t\t\t\tbuttonPosition.top -\n\t\t\t\t\tpopoverSizes.height -\n\t\t\t\t\tpopoverSizes.marginTop -\n\t\t\t\t\tpopoverSizes.marginBottom;\n\t\t\t}\n\n\t\t\tif (options.align === 'button-right' || display.hasClass(options.rightAlignClassName)) {\n\t\t\t\tleft = buttonPosition.left - popoverSizes.width + hostNode.outerWidth();\n\t\t\t}\n\n\t\t\t// Container alignment - make sure it doesn't overflow the table container\n\t\t\tif (options.align === 'dt-container' || options.align === 'container') {\n\t\t\t\tif (left < buttonPosition.left) {\n\t\t\t\t\tleft = -buttonPosition.left;\n\t\t\t\t}\n\n\t\t\t\tif (left + popoverSizes.width > tableSizes.width) {\n\t\t\t\t\tleft = tableSizes.width - popoverSizes.width;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Window adjustment\n\t\t\tif (containerPosition.left + left + popoverSizes.width > $(window).width()) {\n\t\t\t\t// Overflowing the document to the right\n\t\t\t\tleft = $(window).width() - popoverSizes.width - containerPosition.left;\n\t\t\t}\n\n\t\t\tif (buttonOffset.left + left < 0) {\n\t\t\t\t// Off to the left of the document\n\t\t\t\tleft = -buttonOffset.left;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tcontainerPosition.top + top + popoverSizes.height >\n\t\t\t\t$(window).height() + $(window).scrollTop()\n\t\t\t) {\n\t\t\t\t// Pop up if otherwise we'd need the user to scroll down\n\t\t\t\ttop =\n\t\t\t\t\tbuttonPosition.top -\n\t\t\t\t\tpopoverSizes.height -\n\t\t\t\t\tpopoverSizes.marginTop -\n\t\t\t\t\tpopoverSizes.marginBottom;\n\t\t\t}\n\n\t\t\tif (containerPosition.top + top < $(window).scrollTop()) {\n\t\t\t\t// Correction for when the top is beyond the top of the page\n\t\t\t\ttop = buttonPosition.top + hostNode.outerHeight();\n\t\t\t}\n\n\t\t\t// Calculations all done - now set it\n\t\t\tdisplay.css({\n\t\t\t\ttop: top,\n\t\t\t\tleft: left\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\t// Fix position - centre on screen\n\t\t\tvar position = function () {\n\t\t\t\tvar half = $(window).height() / 2;\n\n\t\t\t\tvar top = display.height() / 2;\n\t\t\t\tif (top > half) {\n\t\t\t\t\ttop = half;\n\t\t\t\t}\n\n\t\t\t\tdisplay.css('marginTop', top * -1);\n\t\t\t};\n\n\t\t\tposition();\n\n\t\t\t$(window).on('resize.dtb-collection', function () {\n\t\t\t\tposition();\n\t\t\t});\n\t\t}\n\n\t\tif (options.background) {\n\t\t\tButtons.background(\n\t\t\t\ttrue,\n\t\t\t\toptions.backgroundClassName,\n\t\t\t\toptions.fade,\n\t\t\t\toptions.backgroundHost || hostNode\n\t\t\t);\n\t\t}\n\n\t\t// This is bonkers, but if we don't have a click listener on the\n\t\t// background element, iOS Safari will ignore the body click\n\t\t// listener below. An empty function here is all that is\n\t\t// required to make it work...\n\t\t$('div.dt-button-background').on('click.dtb-collection', function () {});\n\n\t\tif (options.autoClose) {\n\t\t\tsetTimeout(function () {\n\t\t\t\tdt.on('buttons-action.b-internal', function (e, btn, dt, node) {\n\t\t\t\t\tif (node[0] === hostNode[0]) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tclose();\n\t\t\t\t});\n\t\t\t}, 0);\n\t\t}\n\n\t\t$(display).trigger('buttons-popover.dt');\n\n\t\tdt.on('destroy', close);\n\n\t\tsetTimeout(function () {\n\t\t\tclosed = false;\n\t\t\t$('body')\n\t\t\t\t.on('click.dtb-collection', function (e) {\n\t\t\t\t\tif (closed) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// andSelf is deprecated in jQ1.8, but we want 1.7 compat\n\t\t\t\t\tvar back = $.fn.addBack ? 'addBack' : 'andSelf';\n\t\t\t\t\tvar parent = $(e.target).parent()[0];\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t(!$(e.target).parents()[back]().filter(content).length &&\n\t\t\t\t\t\t\t!$(parent).hasClass('dt-buttons')) ||\n\t\t\t\t\t\t$(e.target).hasClass('dt-button-background')\n\t\t\t\t\t) {\n\t\t\t\t\t\tclose();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('keyup.dtb-collection', function (e) {\n\t\t\t\t\tif (e.keyCode === 27) {\n\t\t\t\t\t\tclose();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('keydown.dtb-collection', function (e) {\n\t\t\t\t\t// Focus trap for tab key\n\t\t\t\t\tvar elements = $('a, button', content);\n\t\t\t\t\tvar active = document.activeElement;\n\n\t\t\t\t\tif (e.keyCode !== 9) {\n\t\t\t\t\t\t// tab\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (elements.index(active) === -1) {\n\t\t\t\t\t\t// If current focus is not inside the popover\n\t\t\t\t\t\telements.first().focus();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\telse if (e.shiftKey) {\n\t\t\t\t\t\t// Reverse tabbing order when shift key is pressed\n\t\t\t\t\t\tif (active === elements[0]) {\n\t\t\t\t\t\t\telements.last().focus();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (active === elements.last()[0]) {\n\t\t\t\t\t\t\telements.first().focus();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}, 0);\n\t}\n});\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * Statics\n */\n\n/**\n * Show / hide a background layer behind a collection\n * @param  {boolean} Flag to indicate if the background should be shown or\n *   hidden\n * @param  {string} Class to assign to the background\n * @static\n */\nButtons.background = function (show, className, fade, insertPoint) {\n\tif (fade === undefined) {\n\t\tfade = 400;\n\t}\n\tif (!insertPoint) {\n\t\tinsertPoint = document.body;\n\t}\n\n\tif (show) {\n\t\t_fadeIn(\n\t\t\t$('<div/>').addClass(className).css('display', 'none').insertAfter(insertPoint),\n\t\t\tfade\n\t\t);\n\t}\n\telse {\n\t\t_fadeOut($('div.' + className), fade, function () {\n\t\t\t$(this).removeClass(className).remove();\n\t\t});\n\t}\n};\n\n/**\n * Instance selector - select Buttons instances based on an instance selector\n * value from the buttons assigned to a DataTable. This is only useful if\n * multiple instances are attached to a DataTable.\n * @param  {string|int|array} Instance selector - see `instance-selector`\n *   documentation on the DataTables site\n * @param  {array} Button instance array that was attached to the DataTables\n *   settings object\n * @return {array} Buttons instances\n * @static\n */\nButtons.instanceSelector = function (group, buttons) {\n\tif (group === undefined || group === null) {\n\t\treturn $.map(buttons, function (v) {\n\t\t\treturn v.inst;\n\t\t});\n\t}\n\n\tvar ret = [];\n\tvar names = $.map(buttons, function (v) {\n\t\treturn v.name;\n\t});\n\n\t// Flatten the group selector into an array of single options\n\tvar process = function (input) {\n\t\tif (Array.isArray(input)) {\n\t\t\tfor (var i = 0, ien = input.length; i < ien; i++) {\n\t\t\t\tprocess(input[i]);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof input === 'string') {\n\t\t\tif (input.indexOf(',') !== -1) {\n\t\t\t\t// String selector, list of names\n\t\t\t\tprocess(input.split(','));\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// String selector individual name\n\t\t\t\tvar idx = $.inArray(input.trim(), names);\n\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tret.push(buttons[idx].inst);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (typeof input === 'number') {\n\t\t\t// Index selector\n\t\t\tret.push(buttons[input].inst);\n\t\t}\n\t\telse if (typeof input === 'object') {\n\t\t\t// Actual instance selector\n\t\t\tret.push(input);\n\t\t}\n\t};\n\n\tprocess(group);\n\n\treturn ret;\n};\n\n/**\n * Button selector - select one or more buttons from a selector input so some\n * operation can be performed on them.\n * @param  {array} Button instances array that the selector should operate on\n * @param  {string|int|node|jQuery|array} Button selector - see\n *   `button-selector` documentation on the DataTables site\n * @return {array} Array of objects containing `inst` and `idx` properties of\n *   the selected buttons so you know which instance each button belongs to.\n * @static\n */\nButtons.buttonSelector = function (insts, selector) {\n\tvar ret = [];\n\tvar nodeBuilder = function (a, buttons, baseIdx) {\n\t\tvar button;\n\t\tvar idx;\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tbutton = buttons[i];\n\n\t\t\tif (button) {\n\t\t\t\tidx = baseIdx !== undefined ? baseIdx + i : i + '';\n\n\t\t\t\ta.push({\n\t\t\t\t\tnode: button.node,\n\t\t\t\t\tname: button.conf.name,\n\t\t\t\t\tidx: idx\n\t\t\t\t});\n\n\t\t\t\tif (button.buttons) {\n\t\t\t\t\tnodeBuilder(a, button.buttons, idx + '-');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar run = function (selector, inst) {\n\t\tvar i, ien;\n\t\tvar buttons = [];\n\t\tnodeBuilder(buttons, inst.s.buttons);\n\n\t\tvar nodes = $.map(buttons, function (v) {\n\t\t\treturn v.node;\n\t\t});\n\n\t\tif (Array.isArray(selector) || selector instanceof $) {\n\t\t\tfor (i = 0, ien = selector.length; i < ien; i++) {\n\t\t\t\trun(selector[i], inst);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (selector === null || selector === undefined || selector === '*') {\n\t\t\t// Select all\n\t\t\tfor (i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\t\tret.push({\n\t\t\t\t\tinst: inst,\n\t\t\t\t\tnode: buttons[i].node\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (typeof selector === 'number') {\n\t\t\t// Main button index selector\n\t\t\tif (inst.s.buttons[selector]) {\n\t\t\t\tret.push({\n\t\t\t\t\tinst: inst,\n\t\t\t\t\tnode: inst.s.buttons[selector].node\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (typeof selector === 'string') {\n\t\t\tif (selector.indexOf(',') !== -1) {\n\t\t\t\t// Split\n\t\t\t\tvar a = selector.split(',');\n\n\t\t\t\tfor (i = 0, ien = a.length; i < ien; i++) {\n\t\t\t\t\trun(a[i].trim(), inst);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (selector.match(/^\\d+(\\-\\d+)*$/)) {\n\t\t\t\t// Sub-button index selector\n\t\t\t\tvar indexes = $.map(buttons, function (v) {\n\t\t\t\t\treturn v.idx;\n\t\t\t\t});\n\n\t\t\t\tret.push({\n\t\t\t\t\tinst: inst,\n\t\t\t\t\tnode: buttons[$.inArray(selector, indexes)].node\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (selector.indexOf(':name') !== -1) {\n\t\t\t\t// Button name selector\n\t\t\t\tvar name = selector.replace(':name', '');\n\n\t\t\t\tfor (i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\t\t\tif (buttons[i].name === name) {\n\t\t\t\t\t\tret.push({\n\t\t\t\t\t\t\tinst: inst,\n\t\t\t\t\t\t\tnode: buttons[i].node\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// jQuery selector on the nodes\n\t\t\t\t$(nodes)\n\t\t\t\t\t.filter(selector)\n\t\t\t\t\t.each(function () {\n\t\t\t\t\t\tret.push({\n\t\t\t\t\t\t\tinst: inst,\n\t\t\t\t\t\t\tnode: this\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (typeof selector === 'object' && selector.nodeName) {\n\t\t\t// Node selector\n\t\t\tvar idx = $.inArray(selector, nodes);\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tret.push({\n\t\t\t\t\tinst: inst,\n\t\t\t\t\tnode: nodes[idx]\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tfor (var i = 0, ien = insts.length; i < ien; i++) {\n\t\tvar inst = insts[i];\n\n\t\trun(selector, inst);\n\t}\n\n\treturn ret;\n};\n\n/**\n * Default function used for formatting output data.\n * @param {*} str Data to strip\n */\nButtons.stripData = function (str, config) {\n\tif (typeof str !== 'string') {\n\t\treturn str;\n\t}\n\n\t// Always remove script tags\n\tstr = str.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '');\n\n\t// Always remove comments\n\tstr = str.replace(/<!\\-\\-.*?\\-\\->/g, '');\n\n\tif (!config || config.stripHtml) {\n\t\tstr = str.replace(/<[^>]*>/g, '');\n\t}\n\n\tif (!config || config.trim) {\n\t\tstr = str.replace(/^\\s+|\\s+$/g, '');\n\t}\n\n\tif (!config || config.stripNewlines) {\n\t\tstr = str.replace(/\\n/g, ' ');\n\t}\n\n\tif (!config || config.decodeEntities) {\n\t\t_exportTextarea.innerHTML = str;\n\t\tstr = _exportTextarea.value;\n\t}\n\n\treturn str;\n};\n\n/**\n * Buttons defaults. For full documentation, please refer to the docs/option\n * directory or the DataTables site.\n * @type {Object}\n * @static\n */\nButtons.defaults = {\n\tbuttons: ['copy', 'excel', 'csv', 'pdf', 'print'],\n\tname: 'main',\n\ttabIndex: 0,\n\tdom: {\n\t\tcontainer: {\n\t\t\ttag: 'div',\n\t\t\tclassName: 'dt-buttons'\n\t\t},\n\t\tcollection: {\n\t\t\taction: {\n\t\t\t\t// action button\n\t\t\t\tdropHtml: '<span class=\"dt-button-down-arrow\">&#x25BC;</span>'\n\t\t\t},\n\t\t\tcontainer: {\n\t\t\t\t// The element used for the dropdown\n\t\t\t\tclassName: 'dt-button-collection',\n\t\t\t\tcontent: {\n\t\t\t\t\tclassName: '',\n\t\t\t\t\ttag: 'div'\n\t\t\t\t},\n\t\t\t\ttag: 'div'\n\t\t\t}\n\t\t\t// optionally\n\t\t\t// , button: IButton - buttons inside the collection container\n\t\t\t// , split: ISplit - splits inside the collection container\n\t\t},\n\t\tbutton: {\n\t\t\ttag: 'button',\n\t\t\tclassName: 'dt-button',\n\t\t\tactive: 'dt-button-active', // class name\n\t\t\tdisabled: 'disabled', // class name\n\t\t\tspacer: {\n\t\t\t\tclassName: 'dt-button-spacer',\n\t\t\t\ttag: 'span'\n\t\t\t},\n\t\t\tliner: {\n\t\t\t\ttag: 'span',\n\t\t\t\tclassName: ''\n\t\t\t}\n\t\t},\n\t\tsplit: {\n\t\t\taction: {\n\t\t\t\t// action button\n\t\t\t\tclassName: 'dt-button-split-drop-button dt-button',\n\t\t\t\ttag: 'button'\n\t\t\t},\n\t\t\tdropdown: {\n\t\t\t\t// button to trigger the dropdown\n\t\t\t\talign: 'split-right',\n\t\t\t\tclassName: 'dt-button-split-drop',\n\t\t\t\tdropHtml: '<span class=\"dt-button-down-arrow\">&#x25BC;</span>',\n\t\t\t\tsplitAlignClass: 'dt-button-split-left',\n\t\t\t\ttag: 'button'\n\t\t\t},\n\t\t\twrapper: {\n\t\t\t\t// wrap around both\n\t\t\t\tclassName: 'dt-button-split',\n\t\t\t\ttag: 'div'\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Version information\n * @type {string}\n * @static\n */\nButtons.version = '2.4.0';\n\n$.extend(_dtButtons, {\n\tcollection: {\n\t\ttext: function (dt) {\n\t\t\treturn dt.i18n('buttons.collection', 'Collection');\n\t\t},\n\t\tclassName: 'buttons-collection',\n\t\tcloseButton: false,\n\t\tinit: function (dt, button, config) {\n\t\t\tbutton.attr('aria-expanded', false);\n\t\t},\n\t\taction: function (e, dt, button, config) {\n\t\t\tif (config._collection.parents('body').length) {\n\t\t\t\tthis.popover(false, config);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.popover(config._collection, config);\n\t\t\t}\n\n\t\t\t// When activated using a key - auto focus on the\n\t\t\t// first item in the popover\n\t\t\tif (e.type === 'keypress') {\n\t\t\t\t$('a, button', config._collection).eq(0).focus();\n\t\t\t}\n\t\t},\n\t\tattr: {\n\t\t\t'aria-haspopup': 'dialog'\n\t\t}\n\t\t// Also the popover options, defined in Buttons.popover\n\t},\n\tsplit: {\n\t\ttext: function (dt) {\n\t\t\treturn dt.i18n('buttons.split', 'Split');\n\t\t},\n\t\tclassName: 'buttons-split',\n\t\tcloseButton: false,\n\t\tinit: function (dt, button, config) {\n\t\t\treturn button.attr('aria-expanded', false);\n\t\t},\n\t\taction: function (e, dt, button, config) {\n\t\t\tthis.popover(config._collection, config);\n\t\t},\n\t\tattr: {\n\t\t\t'aria-haspopup': 'dialog'\n\t\t}\n\t\t// Also the popover options, defined in Buttons.popover\n\t},\n\tcopy: function (dt, conf) {\n\t\tif (_dtButtons.copyHtml5) {\n\t\t\treturn 'copyHtml5';\n\t\t}\n\t},\n\tcsv: function (dt, conf) {\n\t\tif (_dtButtons.csvHtml5 && _dtButtons.csvHtml5.available(dt, conf)) {\n\t\t\treturn 'csvHtml5';\n\t\t}\n\t},\n\texcel: function (dt, conf) {\n\t\tif (_dtButtons.excelHtml5 && _dtButtons.excelHtml5.available(dt, conf)) {\n\t\t\treturn 'excelHtml5';\n\t\t}\n\t},\n\tpdf: function (dt, conf) {\n\t\tif (_dtButtons.pdfHtml5 && _dtButtons.pdfHtml5.available(dt, conf)) {\n\t\t\treturn 'pdfHtml5';\n\t\t}\n\t},\n\tpageLength: function (dt) {\n\t\tvar lengthMenu = dt.settings()[0].aLengthMenu;\n\t\tvar vals = [];\n\t\tvar lang = [];\n\t\tvar text = function (dt) {\n\t\t\treturn dt.i18n(\n\t\t\t\t'buttons.pageLength',\n\t\t\t\t{\n\t\t\t\t\t'-1': 'Show all rows',\n\t\t\t\t\t_: 'Show %d rows'\n\t\t\t\t},\n\t\t\t\tdt.page.len()\n\t\t\t);\n\t\t};\n\n\t\t// Support for DataTables 1.x 2D array\n\t\tif (Array.isArray(lengthMenu[0])) {\n\t\t\tvals = lengthMenu[0];\n\t\t\tlang = lengthMenu[1];\n\t\t}\n\t\telse {\n\t\t\tfor (var i = 0; i < lengthMenu.length; i++) {\n\t\t\t\tvar option = lengthMenu[i];\n\n\t\t\t\t// Support for DataTables 2 object in the array\n\t\t\t\tif ($.isPlainObject(option)) {\n\t\t\t\t\tvals.push(option.value);\n\t\t\t\t\tlang.push(option.label);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvals.push(option);\n\t\t\t\t\tlang.push(option);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\textend: 'collection',\n\t\t\ttext: text,\n\t\t\tclassName: 'buttons-page-length',\n\t\t\tautoClose: true,\n\t\t\tbuttons: $.map(vals, function (val, i) {\n\t\t\t\treturn {\n\t\t\t\t\ttext: lang[i],\n\t\t\t\t\tclassName: 'button-page-length',\n\t\t\t\t\taction: function (e, dt) {\n\t\t\t\t\t\tdt.page.len(val).draw();\n\t\t\t\t\t},\n\t\t\t\t\tinit: function (dt, node, conf) {\n\t\t\t\t\t\tvar that = this;\n\t\t\t\t\t\tvar fn = function () {\n\t\t\t\t\t\t\tthat.active(dt.page.len() === val);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tdt.on('length.dt' + conf.namespace, fn);\n\t\t\t\t\t\tfn();\n\t\t\t\t\t},\n\t\t\t\t\tdestroy: function (dt, node, conf) {\n\t\t\t\t\t\tdt.off('length.dt' + conf.namespace);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}),\n\t\t\tinit: function (dt, node, conf) {\n\t\t\t\tvar that = this;\n\t\t\t\tdt.on('length.dt' + conf.namespace, function () {\n\t\t\t\t\tthat.text(conf.text);\n\t\t\t\t});\n\t\t\t},\n\t\t\tdestroy: function (dt, node, conf) {\n\t\t\t\tdt.off('length.dt' + conf.namespace);\n\t\t\t}\n\t\t};\n\t},\n\tspacer: {\n\t\tstyle: 'empty',\n\t\tspacer: true,\n\t\ttext: function (dt) {\n\t\t\treturn dt.i18n('buttons.spacer', '');\n\t\t}\n\t}\n});\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * DataTables API\n *\n * For complete documentation, please refer to the docs/api directory or the\n * DataTables site\n */\n\n// Buttons group and individual button selector\nDataTable.Api.register('buttons()', function (group, selector) {\n\t// Argument shifting\n\tif (selector === undefined) {\n\t\tselector = group;\n\t\tgroup = undefined;\n\t}\n\n\tthis.selector.buttonGroup = group;\n\n\tvar res = this.iterator(\n\t\ttrue,\n\t\t'table',\n\t\tfunction (ctx) {\n\t\t\tif (ctx._buttons) {\n\t\t\t\treturn Buttons.buttonSelector(\n\t\t\t\t\tButtons.instanceSelector(group, ctx._buttons),\n\t\t\t\t\tselector\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\ttrue\n\t);\n\n\tres._groupSelector = group;\n\treturn res;\n});\n\n// Individual button selector\nDataTable.Api.register('button()', function (group, selector) {\n\t// just run buttons() and truncate\n\tvar buttons = this.buttons(group, selector);\n\n\tif (buttons.length > 1) {\n\t\tbuttons.splice(1, buttons.length);\n\t}\n\n\treturn buttons;\n});\n\n// Active buttons\nDataTable.Api.registerPlural('buttons().active()', 'button().active()', function (flag) {\n\tif (flag === undefined) {\n\t\treturn this.map(function (set) {\n\t\t\treturn set.inst.active(set.node);\n\t\t});\n\t}\n\n\treturn this.each(function (set) {\n\t\tset.inst.active(set.node, flag);\n\t});\n});\n\n// Get / set button action\nDataTable.Api.registerPlural('buttons().action()', 'button().action()', function (action) {\n\tif (action === undefined) {\n\t\treturn this.map(function (set) {\n\t\t\treturn set.inst.action(set.node);\n\t\t});\n\t}\n\n\treturn this.each(function (set) {\n\t\tset.inst.action(set.node, action);\n\t});\n});\n\n// Collection control\nDataTable.Api.registerPlural(\n\t'buttons().collectionRebuild()',\n\t'button().collectionRebuild()',\n\tfunction (buttons) {\n\t\treturn this.each(function (set) {\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\n\t\t\t\tif (typeof buttons[i] === 'object') {\n\t\t\t\t\tbuttons[i].parentConf = set;\n\t\t\t\t}\n\t\t\t}\n\t\t\tset.inst.collectionRebuild(set.node, buttons);\n\t\t});\n\t}\n);\n\n// Enable / disable buttons\nDataTable.Api.register(['buttons().enable()', 'button().enable()'], function (flag) {\n\treturn this.each(function (set) {\n\t\tset.inst.enable(set.node, flag);\n\t});\n});\n\n// Disable buttons\nDataTable.Api.register(['buttons().disable()', 'button().disable()'], function () {\n\treturn this.each(function (set) {\n\t\tset.inst.disable(set.node);\n\t});\n});\n\n// Button index\nDataTable.Api.register('button().index()', function () {\n\tvar idx = null;\n\n\tthis.each(function (set) {\n\t\tvar res = set.inst.index(set.node);\n\n\t\tif (res !== null) {\n\t\t\tidx = res;\n\t\t}\n\t});\n\n\treturn idx;\n});\n\n// Get button nodes\nDataTable.Api.registerPlural('buttons().nodes()', 'button().node()', function () {\n\tvar jq = $();\n\n\t// jQuery will automatically reduce duplicates to a single entry\n\t$(\n\t\tthis.each(function (set) {\n\t\t\tjq = jq.add(set.inst.node(set.node));\n\t\t})\n\t);\n\n\treturn jq;\n});\n\n// Get / set button processing state\nDataTable.Api.registerPlural('buttons().processing()', 'button().processing()', function (flag) {\n\tif (flag === undefined) {\n\t\treturn this.map(function (set) {\n\t\t\treturn set.inst.processing(set.node);\n\t\t});\n\t}\n\n\treturn this.each(function (set) {\n\t\tset.inst.processing(set.node, flag);\n\t});\n});\n\n// Get / set button text (i.e. the button labels)\nDataTable.Api.registerPlural('buttons().text()', 'button().text()', function (label) {\n\tif (label === undefined) {\n\t\treturn this.map(function (set) {\n\t\t\treturn set.inst.text(set.node);\n\t\t});\n\t}\n\n\treturn this.each(function (set) {\n\t\tset.inst.text(set.node, label);\n\t});\n});\n\n// Trigger a button's action\nDataTable.Api.registerPlural('buttons().trigger()', 'button().trigger()', function () {\n\treturn this.each(function (set) {\n\t\tset.inst.node(set.node).trigger('click');\n\t});\n});\n\n// Button resolver to the popover\nDataTable.Api.register('button().popover()', function (content, options) {\n\treturn this.map(function (set) {\n\t\treturn set.inst._popover(content, this.button(this[0].node), options);\n\t});\n});\n\n// Get the container elements\nDataTable.Api.register('buttons().containers()', function () {\n\tvar jq = $();\n\tvar groupSelector = this._groupSelector;\n\n\t// We need to use the group selector directly, since if there are no buttons\n\t// the result set will be empty\n\tthis.iterator(true, 'table', function (ctx) {\n\t\tif (ctx._buttons) {\n\t\t\tvar insts = Buttons.instanceSelector(groupSelector, ctx._buttons);\n\n\t\t\tfor (var i = 0, ien = insts.length; i < ien; i++) {\n\t\t\t\tjq = jq.add(insts[i].container());\n\t\t\t}\n\t\t}\n\t});\n\n\treturn jq;\n});\n\nDataTable.Api.register('buttons().container()', function () {\n\t// API level of nesting is `buttons()` so we can zip into the containers method\n\treturn this.containers().eq(0);\n});\n\n// Add a new button\nDataTable.Api.register('button().add()', function (idx, conf, draw) {\n\tvar ctx = this.context;\n\n\t// Don't use `this` as it could be empty - select the instances directly\n\tif (ctx.length) {\n\t\tvar inst = Buttons.instanceSelector(this._groupSelector, ctx[0]._buttons);\n\n\t\tif (inst.length) {\n\t\t\tinst[0].add(conf, idx, draw);\n\t\t}\n\t}\n\n\treturn this.button(this._groupSelector, idx);\n});\n\n// Destroy the button sets selected\nDataTable.Api.register('buttons().destroy()', function () {\n\tthis.pluck('inst')\n\t\t.unique()\n\t\t.each(function (inst) {\n\t\t\tinst.destroy();\n\t\t});\n\n\treturn this;\n});\n\n// Remove a button\nDataTable.Api.registerPlural('buttons().remove()', 'buttons().remove()', function () {\n\tthis.each(function (set) {\n\t\tset.inst.remove(set.node);\n\t});\n\n\treturn this;\n});\n\n// Information box that can be used by buttons\nvar _infoTimer;\nDataTable.Api.register('buttons.info()', function (title, message, time) {\n\tvar that = this;\n\n\tif (title === false) {\n\t\tthis.off('destroy.btn-info');\n\t\t_fadeOut($('#datatables_buttons_info'), 400, function () {\n\t\t\t$(this).remove();\n\t\t});\n\t\tclearTimeout(_infoTimer);\n\t\t_infoTimer = null;\n\n\t\treturn this;\n\t}\n\n\tif (_infoTimer) {\n\t\tclearTimeout(_infoTimer);\n\t}\n\n\tif ($('#datatables_buttons_info').length) {\n\t\t$('#datatables_buttons_info').remove();\n\t}\n\n\ttitle = title ? '<h2>' + title + '</h2>' : '';\n\n\t_fadeIn(\n\t\t$('<div id=\"datatables_buttons_info\" class=\"dt-button-info\"/>')\n\t\t\t.html(title)\n\t\t\t.append($('<div/>')[typeof message === 'string' ? 'html' : 'append'](message))\n\t\t\t.css('display', 'none')\n\t\t\t.appendTo('body')\n\t);\n\n\tif (time !== undefined && time !== 0) {\n\t\t_infoTimer = setTimeout(function () {\n\t\t\tthat.buttons.info(false);\n\t\t}, time);\n\t}\n\n\tthis.on('destroy.btn-info', function () {\n\t\tthat.buttons.info(false);\n\t});\n\n\treturn this;\n});\n\n// Get data from the table for export - this is common to a number of plug-in\n// buttons so it is included in the Buttons core library\nDataTable.Api.register('buttons.exportData()', function (options) {\n\tif (this.context.length) {\n\t\treturn _exportData(new DataTable.Api(this.context[0]), options);\n\t}\n});\n\n// Get information about the export that is common to many of the export data\n// types (DRY)\nDataTable.Api.register('buttons.exportInfo()', function (conf) {\n\tif (!conf) {\n\t\tconf = {};\n\t}\n\n\treturn {\n\t\tfilename: _filename(conf),\n\t\ttitle: _title(conf),\n\t\tmessageTop: _message(this, conf.message || conf.messageTop, 'top'),\n\t\tmessageBottom: _message(this, conf.messageBottom, 'bottom')\n\t};\n});\n\n/**\n * Get the file name for an exported file.\n *\n * @param {object}\tconfig Button configuration\n * @param {boolean} incExtension Include the file name extension\n */\nvar _filename = function (config) {\n\t// Backwards compatibility\n\tvar filename =\n\t\tconfig.filename === '*' &&\n\t\tconfig.title !== '*' &&\n\t\tconfig.title !== undefined &&\n\t\tconfig.title !== null &&\n\t\tconfig.title !== ''\n\t\t\t? config.title\n\t\t\t: config.filename;\n\n\tif (typeof filename === 'function') {\n\t\tfilename = filename();\n\t}\n\n\tif (filename === undefined || filename === null) {\n\t\treturn null;\n\t}\n\n\tif (filename.indexOf('*') !== -1) {\n\t\tfilename = filename.replace('*', $('head > title').text()).trim();\n\t}\n\n\t// Strip characters which the OS will object to\n\tfilename = filename.replace(/[^a-zA-Z0-9_\\u00A1-\\uFFFF\\.,\\-_ !\\(\\)]/g, '');\n\n\tvar extension = _stringOrFunction(config.extension);\n\tif (!extension) {\n\t\textension = '';\n\t}\n\n\treturn filename + extension;\n};\n\n/**\n * Simply utility method to allow parameters to be given as a function\n *\n * @param {undefined|string|function} option Option\n * @return {null|string} Resolved value\n */\nvar _stringOrFunction = function (option) {\n\tif (option === null || option === undefined) {\n\t\treturn null;\n\t}\n\telse if (typeof option === 'function') {\n\t\treturn option();\n\t}\n\treturn option;\n};\n\n/**\n * Get the title for an exported file.\n *\n * @param {object} config\tButton configuration\n */\nvar _title = function (config) {\n\tvar title = _stringOrFunction(config.title);\n\n\treturn title === null\n\t\t? null\n\t\t: title.indexOf('*') !== -1\n\t\t? title.replace('*', $('head > title').text() || 'Exported data')\n\t\t: title;\n};\n\nvar _message = function (dt, option, position) {\n\tvar message = _stringOrFunction(option);\n\tif (message === null) {\n\t\treturn null;\n\t}\n\n\tvar caption = $('caption', dt.table().container()).eq(0);\n\tif (message === '*') {\n\t\tvar side = caption.css('caption-side');\n\t\tif (side !== position) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn caption.length ? caption.text() : '';\n\t}\n\n\treturn message;\n};\n\nvar _exportTextarea = $('<textarea/>')[0];\nvar _exportData = function (dt, inOpts) {\n\tvar config = $.extend(\n\t\ttrue,\n\t\t{},\n\t\t{\n\t\t\trows: null,\n\t\t\tcolumns: '',\n\t\t\tmodifier: {\n\t\t\t\tsearch: 'applied',\n\t\t\t\torder: 'applied'\n\t\t\t},\n\t\t\torthogonal: 'display',\n\t\t\tstripHtml: true,\n\t\t\tstripNewlines: true,\n\t\t\tdecodeEntities: true,\n\t\t\ttrim: true,\n\t\t\tformat: {\n\t\t\t\theader: function (d) {\n\t\t\t\t\treturn Buttons.stripData(d, config);\n\t\t\t\t},\n\t\t\t\tfooter: function (d) {\n\t\t\t\t\treturn Buttons.stripData(d, config);\n\t\t\t\t},\n\t\t\t\tbody: function (d) {\n\t\t\t\t\treturn Buttons.stripData(d, config);\n\t\t\t\t}\n\t\t\t},\n\t\t\tcustomizeData: null\n\t\t},\n\t\tinOpts\n\t);\n\n\tvar header = dt\n\t\t.columns(config.columns)\n\t\t.indexes()\n\t\t.map(function (idx) {\n\t\t\tvar el = dt.column(idx).header();\n\t\t\treturn config.format.header(el.innerHTML, idx, el);\n\t\t})\n\t\t.toArray();\n\n\tvar footer = dt.table().footer()\n\t\t? dt\n\t\t\t\t.columns(config.columns)\n\t\t\t\t.indexes()\n\t\t\t\t.map(function (idx) {\n\t\t\t\t\tvar el = dt.column(idx).footer();\n\t\t\t\t\treturn config.format.footer(el ? el.innerHTML : '', idx, el);\n\t\t\t\t})\n\t\t\t\t.toArray()\n\t\t: null;\n\n\t// If Select is available on this table, and any rows are selected, limit the export\n\t// to the selected rows. If no rows are selected, all rows will be exported. Specify\n\t// a `selected` modifier to control directly.\n\tvar modifier = $.extend({}, config.modifier);\n\tif (dt.select && typeof dt.select.info === 'function' && modifier.selected === undefined) {\n\t\tif (dt.rows(config.rows, $.extend({ selected: true }, modifier)).any()) {\n\t\t\t$.extend(modifier, { selected: true });\n\t\t}\n\t}\n\n\tvar rowIndexes = dt.rows(config.rows, modifier).indexes().toArray();\n\tvar selectedCells = dt.cells(rowIndexes, config.columns);\n\tvar cells = selectedCells.render(config.orthogonal).toArray();\n\tvar cellNodes = selectedCells.nodes().toArray();\n\n\tvar columns = header.length;\n\tvar rows = columns > 0 ? cells.length / columns : 0;\n\tvar body = [];\n\tvar cellCounter = 0;\n\n\tfor (var i = 0, ien = rows; i < ien; i++) {\n\t\tvar row = [columns];\n\n\t\tfor (var j = 0; j < columns; j++) {\n\t\t\trow[j] = config.format.body(cells[cellCounter], i, j, cellNodes[cellCounter]);\n\t\t\tcellCounter++;\n\t\t}\n\n\t\tbody[i] = row;\n\t}\n\n\tvar data = {\n\t\theader: header,\n\t\tfooter: footer,\n\t\tbody: body\n\t};\n\n\tif (config.customizeData) {\n\t\tconfig.customizeData(data);\n\t}\n\n\treturn data;\n};\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * DataTables interface\n */\n\n// Attach to DataTables objects for global access\n$.fn.dataTable.Buttons = Buttons;\n$.fn.DataTable.Buttons = Buttons;\n\n// DataTables creation - check if the buttons have been defined for this table,\n// they will have been if the `B` option was used in `dom`, otherwise we should\n// create the buttons instance here so they can be inserted into the document\n// using the API. Listen for `init` for compatibility with pre 1.10.10, but to\n// be removed in future.\n$(document).on('init.dt plugin-init.dt', function (e, settings) {\n\tif (e.namespace !== 'dt') {\n\t\treturn;\n\t}\n\n\tvar opts = settings.oInit.buttons || DataTable.defaults.buttons;\n\n\tif (opts && !settings._buttons) {\n\t\tnew Buttons(settings, opts).container();\n\t}\n});\n\nfunction _init(settings, options) {\n\tvar api = new DataTable.Api(settings);\n\tvar opts = options ? options : api.init().buttons || DataTable.defaults.buttons;\n\n\treturn new Buttons(api, opts).container();\n}\n\n// DataTables `dom` feature option\nDataTable.ext.feature.push({\n\tfnInit: _init,\n\tcFeature: 'B'\n});\n\n// DataTables 2 layout feature\nif (DataTable.ext.features) {\n\tDataTable.ext.features.register('buttons', _init);\n}\n\n\nreturn DataTable;\n}));\n"],"names":["factory","define","amd","$","window","document","exports","jq","require","cjsRequires","root","fn","dataTable","module","jQuery","undefined","DataTable","_instCounter","_buttonCounter","_dtButtons","ext","buttons","_fadeIn","el","duration","animate","stop","fadeIn","css","call","_fadeOut","fadeOut","_infoTimer","Buttons","dt","config","this","settings","container","Array","isArray","c","extend","defaults","s","Api","listenKeys","namespace","dom","tag","addClass","className","_constructor","prototype","action","node","button","_nodeToButton","conf","active","flag","klass","jqNode","inCollection","collection","hasClass","toggleClass","add","idx","draw","split","base","i","ien","length","_expandButton","_draw","collectionRebuild","newButtons","remove","prefixButtons","unshift","apply","postfixButtons","push","newBtn","parentConf","disable","disabled","prop","destroy","off","slice","buttonInsts","inst","splice","enable","removeClass","index","nested","inner","match","name","processing","table","triggerHandler","host","_nodeToHost","destroying","_removeKey","inArray","text","label","textNode","opt","html","that","dtSettings","_buttons","on","e","activeElement","body","character","String","fromCharCode","keyCode","toLowerCase","indexOf","_keypress","_addKey","key","isPlainObject","children","detach","append","inserter","attachTo","inSplit","attachPoint","isSplit","domCollection","_resolveExtends","built","_buildButton","content","_collection","dropHtml","j","item","parent","collectionLayout","dropup","fade","init","configDom","spacer","style","available","hasOwnProperty","clickBlurs","attr","iTabIndex","id","preventDefault","trigger","liner","enabled","titleAttr","splitDiv","buttonContainer","buttonCreated","dropdownConf","wrapperConf","wrapper","dropButtonConfig","align","dropdown","closeButton","splitAlignClass","splitAction","dropButton","stopPropagation","get","ret","_buttonsHandled","run","click","shiftKey","altKey","ctrlKey","metaKey","recurse","a","join","toConfObject","loop","objArray","originalClassName","_popover","hostButton","inOpts","closed","options","autoClose","background","backgroundClassName","containerClassName","contentClassName","collectionTitle","popoverTitle","rightAlignClassName","containerSelector","replace","hostNode","close","nodes","existingExpanded","closest","eq","cnt","mod","display","role","appendTo","parents","lastChild","prepend","insertAfter","tableContainer","position","span","width","offsetParent","buttonPosition","buttonOffset","offset","tableSizes","containerPosition","computed","getComputedStyle","height","outerHeight","parseFloat","paddingLeft","right","left","bottom","top","popoverSizes","outerWidth","marginTop","marginBottom","scrollTop","half","backgroundHost","setTimeout","btn","back","addBack","target","filter","elements","first","focus","last","show","insertPoint","instanceSelector","group","map","v","names","process","input","trim","buttonSelector","insts","selector","nodeBuilder","baseIdx","indexes","each","nodeName","stripData","str","stripHtml","stripNewlines","decodeEntities","_exportTextarea","innerHTML","value","tabIndex","version","i18n","popover","type","copy","copyHtml5","csv","csvHtml5","excel","excelHtml5","pdf","pdfHtml5","pageLength","lengthMenu","aLengthMenu","vals","lang","option","_","page","len","val","register","buttonGroup","res","iterator","ctx","_groupSelector","registerPlural","set","groupSelector","containers","context","pluck","unique","title","message","time","clearTimeout","info","_exportData","filename","_filename","_title","messageTop","_message","messageBottom","extension","_stringOrFunction","caption","rows","columns","modifier","search","order","orthogonal","format","header","d","footer","customizeData","column","toArray","select","selected","any","rowIndexes","selectedCells","cells","render","cellNodes","cellCounter","row","data","_init","api","opts","oInit","feature","fnInit","cFeature","features"],"mappings":"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"}