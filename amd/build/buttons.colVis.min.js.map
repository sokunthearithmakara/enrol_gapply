{"version":3,"file":"buttons.colVis.min.js","sources":["../src/buttons.colVis.js"],"sourcesContent":["/* eslint-disable */\n/*!\n * Column visibility buttons for Buttons and DataTables.\n * Â© SpryMedia Ltd - datatables.net/license\n */\n\n(function( factory ){\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( ['jquery', 'enrol_gapply/jquery.dataTables', 'enrol_gapply/dataTables.buttons'], function ( $ ) {\n\t\t\treturn factory( $, window, document );\n\t\t} );\n\t}\n\telse if ( typeof exports === 'object' ) {\n\t\t// CommonJS\n\t\tvar jq = require('jquery');\n\t\tvar cjsRequires = function (root, $) {\n\t\t\tif ( ! $.fn.dataTable ) {\n\t\t\t\trequire('enrol_gapply/jquery.dataTables')(root, $);\n\t\t\t}\n\n\t\t\tif ( ! $.fn.dataTable.Buttons ) {\n\t\t\t\trequire('enrol_gapply/dataTables.buttons')(root, $);\n\t\t\t}\n\t\t};\n\n\t\tif (typeof window === 'undefined') {\n\t\t\tmodule.exports = function (root, $) {\n\t\t\t\tif ( ! root ) {\n\t\t\t\t\t// CommonJS environments without a window global must pass a\n\t\t\t\t\t// root. This will give an error otherwise\n\t\t\t\t\troot = window;\n\t\t\t\t}\n\n\t\t\t\tif ( ! $ ) {\n\t\t\t\t\t$ = jq( root );\n\t\t\t\t}\n\n\t\t\t\tcjsRequires( root, $ );\n\t\t\t\treturn factory( $, root, root.document );\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tcjsRequires( window, jq );\n\t\t\tmodule.exports = factory( jq, window, window.document );\n\t\t}\n\t}\n\telse {\n\t\t// Browser\n\t\tfactory( jQuery, window, document );\n\t}\n}(function( $, window, document, undefined ) {\n'use strict';\nvar DataTable = $.fn.dataTable;\n\n\n\n$.extend(DataTable.ext.buttons, {\n\t// A collection of column visibility buttons\n\tcolvis: function (dt, conf) {\n\t\tvar node = null;\n\t\tvar buttonConf = {\n\t\t\textend: 'collection',\n\t\t\tinit: function (dt, n) {\n\t\t\t\tnode = n;\n\t\t\t},\n\t\t\ttext: function (dt) {\n\t\t\t\treturn dt.i18n('buttons.colvis', 'Column visibility');\n\t\t\t},\n\t\t\tclassName: 'buttons-colvis',\n\t\t\tcloseButton: false,\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\textend: 'columnsToggle',\n\t\t\t\t\tcolumns: conf.columns,\n\t\t\t\t\tcolumnText: conf.columnText\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\t// Rebuild the collection with the new column structure if columns are reordered\n\t\tdt.on('column-reorder.dt' + conf.namespace, function (e, settings, details) {\n\t\t\tdt.button(null, dt.button(null, node).node()).collectionRebuild([\n\t\t\t\t{\n\t\t\t\t\textend: 'columnsToggle',\n\t\t\t\t\tcolumns: conf.columns,\n\t\t\t\t\tcolumnText: conf.columnText\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\n\t\treturn buttonConf;\n\t},\n\n\t// Selected columns with individual buttons - toggle column visibility\n\tcolumnsToggle: function (dt, conf) {\n\t\tvar columns = dt\n\t\t\t.columns(conf.columns)\n\t\t\t.indexes()\n\t\t\t.map(function (idx) {\n\t\t\t\treturn {\n\t\t\t\t\textend: 'columnToggle',\n\t\t\t\t\tcolumns: idx,\n\t\t\t\t\tcolumnText: conf.columnText\n\t\t\t\t};\n\t\t\t})\n\t\t\t.toArray();\n\n\t\treturn columns;\n\t},\n\n\t// Single button to toggle column visibility\n\tcolumnToggle: function (dt, conf) {\n\t\treturn {\n\t\t\textend: 'columnVisibility',\n\t\t\tcolumns: conf.columns,\n\t\t\tcolumnText: conf.columnText\n\t\t};\n\t},\n\n\t// Selected columns with individual buttons - set column visibility\n\tcolumnsVisibility: function (dt, conf) {\n\t\tvar columns = dt\n\t\t\t.columns(conf.columns)\n\t\t\t.indexes()\n\t\t\t.map(function (idx) {\n\t\t\t\treturn {\n\t\t\t\t\textend: 'columnVisibility',\n\t\t\t\t\tcolumns: idx,\n\t\t\t\t\tvisibility: conf.visibility,\n\t\t\t\t\tcolumnText: conf.columnText\n\t\t\t\t};\n\t\t\t})\n\t\t\t.toArray();\n\n\t\treturn columns;\n\t},\n\n\t// Single button to set column visibility\n\tcolumnVisibility: {\n\t\tcolumns: undefined, // column selector\n\t\ttext: function (dt, button, conf) {\n\t\t\treturn conf._columnText(dt, conf);\n\t\t},\n\t\tclassName: 'buttons-columnVisibility',\n\t\taction: function (e, dt, button, conf) {\n\t\t\tvar col = dt.columns(conf.columns);\n\t\t\tvar curr = col.visible();\n\n\t\t\tcol.visible(\n\t\t\t\tconf.visibility !== undefined ? conf.visibility : !(curr.length ? curr[0] : false)\n\t\t\t);\n\t\t},\n\t\tinit: function (dt, button, conf) {\n\t\t\tvar that = this;\n\t\t\tbutton.attr('data-cv-idx', conf.columns);\n\n\t\t\tdt.on('column-visibility.dt' + conf.namespace, function (e, settings) {\n\t\t\t\tif (!settings.bDestroying && settings.nTable == dt.settings()[0].nTable) {\n\t\t\t\t\tthat.active(dt.column(conf.columns).visible());\n\t\t\t\t}\n\t\t\t}).on('column-reorder.dt' + conf.namespace, function (e, settings, details) {\n\t\t\t\t// Button has been removed from the DOM\n\t\t\t\tif (conf.destroying) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (dt.columns(conf.columns).count() !== 1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// This button controls the same column index but the text for the column has\n\t\t\t\t// changed\n\t\t\t\tthat.text(conf._columnText(dt, conf));\n\n\t\t\t\t// Since its a different column, we need to check its visibility\n\t\t\t\tthat.active(dt.column(conf.columns).visible());\n\t\t\t});\n\n\t\t\tthis.active(dt.column(conf.columns).visible());\n\t\t},\n\t\tdestroy: function (dt, button, conf) {\n\t\t\tdt.off('column-visibility.dt' + conf.namespace).off(\n\t\t\t\t'column-reorder.dt' + conf.namespace\n\t\t\t);\n\t\t},\n\n\t\t_columnText: function (dt, conf) {\n\t\t\t// Use DataTables' internal data structure until this is presented\n\t\t\t// is a public API. The other option is to use\n\t\t\t// `$( column(col).node() ).text()` but the node might not have been\n\t\t\t// populated when Buttons is constructed.\n\t\t\tvar idx = dt.column(conf.columns).index();\n\t\t\tvar title = dt.settings()[0].aoColumns[idx].sTitle;\n\n\t\t\tif (!title) {\n\t\t\t\ttitle = dt.column(idx).header().innerHTML;\n\t\t\t}\n\n\t\t\ttitle = title\n\t\t\t\t.replace(/\\n/g, ' ') // remove new lines\n\t\t\t\t.replace(/<br\\s*\\/?>/gi, ' ') // replace line breaks with spaces\n\t\t\t\t.replace(/<select(.*?)<\\/select>/g, '') // remove select tags, including options text\n\t\t\t\t.replace(/<!\\-\\-.*?\\-\\->/g, '') // strip HTML comments\n\t\t\t\t.replace(/<.*?>/g, '') // strip HTML\n\t\t\t\t.replace(/^\\s+|\\s+$/g, ''); // trim\n\n\t\t\treturn conf.columnText ? conf.columnText(dt, idx, title) : title;\n\t\t}\n\t},\n\n\tcolvisRestore: {\n\t\tclassName: 'buttons-colvisRestore',\n\n\t\ttext: function (dt) {\n\t\t\treturn dt.i18n('buttons.colvisRestore', 'Restore visibility');\n\t\t},\n\n\t\tinit: function (dt, button, conf) {\n\t\t\tconf._visOriginal = dt\n\t\t\t\t.columns()\n\t\t\t\t.indexes()\n\t\t\t\t.map(function (idx) {\n\t\t\t\t\treturn dt.column(idx).visible();\n\t\t\t\t})\n\t\t\t\t.toArray();\n\t\t},\n\n\t\taction: function (e, dt, button, conf) {\n\t\t\tdt.columns().every(function (i) {\n\t\t\t\t// Take into account that ColReorder might have disrupted our\n\t\t\t\t// indexes\n\t\t\t\tvar idx =\n\t\t\t\t\tdt.colReorder && dt.colReorder.transpose\n\t\t\t\t\t\t? dt.colReorder.transpose(i, 'toOriginal')\n\t\t\t\t\t\t: i;\n\n\t\t\t\tthis.visible(conf._visOriginal[idx]);\n\t\t\t});\n\t\t}\n\t},\n\n\tcolvisGroup: {\n\t\tclassName: 'buttons-colvisGroup',\n\n\t\taction: function (e, dt, button, conf) {\n\t\t\tdt.columns(conf.show).visible(true, false);\n\t\t\tdt.columns(conf.hide).visible(false, false);\n\n\t\t\tdt.columns.adjust();\n\t\t},\n\n\t\tshow: [],\n\n\t\thide: []\n\t}\n});\n\n\nreturn DataTable;\n}));\n"],"names":["factory","define","amd","$","window","document","exports","jq","require","cjsRequires","root","fn","dataTable","Buttons","module","jQuery","undefined","DataTable","extend","ext","buttons","colvis","dt","conf","node","buttonConf","init","n","text","i18n","className","closeButton","columns","columnText","on","namespace","e","settings","details","button","collectionRebuild","columnsToggle","indexes","map","idx","toArray","columnToggle","columnsVisibility","visibility","columnVisibility","_columnText","action","col","curr","visible","length","that","this","attr","bDestroying","nTable","active","column","destroying","count","destroy","off","index","title","aoColumns","sTitle","header","innerHTML","replace","colvisRestore","_visOriginal","every","i","colReorder","transpose","colvisGroup","show","hide","adjust"],"mappings":"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"}