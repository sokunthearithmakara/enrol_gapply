!function(factory){if("function"==typeof define&&define.amd)define("enrol_gapply/buttons.colVis",["jquery","enrol_gapply/jquery.dataTables","enrol_gapply/dataTables.buttons"],(function($){return factory($,window,document)}));else if("object"==typeof exports){var jq=require("jquery"),cjsRequires=function(root,$){$.fn.dataTable||require("enrol_gapply/jquery.dataTables")(root,$),$.fn.dataTable.Buttons||require("enrol_gapply/dataTables.buttons")(root,$)};"undefined"==typeof window?module.exports=function(root,$){return root||(root=window),$||($=jq(root)),cjsRequires(root,$),factory($,root,root.document)}:(cjsRequires(window,jq),module.exports=factory(jq,window,window.document))}else factory(jQuery,window,document)}((function($,window,document,undefined$1){var DataTable=$.fn.dataTable;return $.extend(DataTable.ext.buttons,{colvis:function(dt,conf){var node=null,buttonConf={extend:"collection",init:function(dt,n){node=n},text:function(dt){return dt.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",closeButton:!1,buttons:[{extend:"columnsToggle",columns:conf.columns,columnText:conf.columnText}]};return dt.on("column-reorder.dt"+conf.namespace,(function(e,settings,details){dt.button(null,dt.button(null,node).node()).collectionRebuild([{extend:"columnsToggle",columns:conf.columns,columnText:conf.columnText}])})),buttonConf},columnsToggle:function(dt,conf){return dt.columns(conf.columns).indexes().map((function(idx){return{extend:"columnToggle",columns:idx,columnText:conf.columnText}})).toArray()},columnToggle:function(dt,conf){return{extend:"columnVisibility",columns:conf.columns,columnText:conf.columnText}},columnsVisibility:function(dt,conf){return dt.columns(conf.columns).indexes().map((function(idx){return{extend:"columnVisibility",columns:idx,visibility:conf.visibility,columnText:conf.columnText}})).toArray()},columnVisibility:{columns:undefined$1,text:function(dt,button,conf){return conf._columnText(dt,conf)},className:"buttons-columnVisibility",action:function(e,dt,button,conf){var col=dt.columns(conf.columns),curr=col.visible();col.visible(conf.visibility!==undefined$1?conf.visibility:!(curr.length&&curr[0]))},init:function(dt,button,conf){var that=this;button.attr("data-cv-idx",conf.columns),dt.on("column-visibility.dt"+conf.namespace,(function(e,settings){settings.bDestroying||settings.nTable!=dt.settings()[0].nTable||that.active(dt.column(conf.columns).visible())})).on("column-reorder.dt"+conf.namespace,(function(e,settings,details){conf.destroying||1===dt.columns(conf.columns).count()&&(that.text(conf._columnText(dt,conf)),that.active(dt.column(conf.columns).visible()))})),this.active(dt.column(conf.columns).visible())},destroy:function(dt,button,conf){dt.off("column-visibility.dt"+conf.namespace).off("column-reorder.dt"+conf.namespace)},_columnText:function(dt,conf){var idx=dt.column(conf.columns).index(),title=dt.settings()[0].aoColumns[idx].sTitle;return title||(title=dt.column(idx).header().innerHTML),title=title.replace(/\n/g," ").replace(/<br\s*\/?>/gi," ").replace(/<select(.*?)<\/select>/g,"").replace(/<!\-\-.*?\-\->/g,"").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),conf.columnText?conf.columnText(dt,idx,title):title}},colvisRestore:{className:"buttons-colvisRestore",text:function(dt){return dt.i18n("buttons.colvisRestore","Restore visibility")},init:function(dt,button,conf){conf._visOriginal=dt.columns().indexes().map((function(idx){return dt.column(idx).visible()})).toArray()},action:function(e,dt,button,conf){dt.columns().every((function(i){var idx=dt.colReorder&&dt.colReorder.transpose?dt.colReorder.transpose(i,"toOriginal"):i;this.visible(conf._visOriginal[idx])}))}},colvisGroup:{className:"buttons-colvisGroup",action:function(e,dt,button,conf){dt.columns(conf.show).visible(!0,!1),dt.columns(conf.hide).visible(!1,!1),dt.columns.adjust()},show:[],hide:[]}}),DataTable}));

//# sourceMappingURL=buttons.colVis.min.js.map