{"version":3,"file":"custom.min.js","sources":["../src/custom.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Custom module\n *\n * @module     enrol_gapply/custom\n * @copyright  2024 Sokunthearith Makara <sokunthearithmakara@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(\n    [\n        'jquery',\n        'enrol_gapply/jszip',\n        'core/toast',\n        'enrol_gapply/jquery.dataTables',\n        'enrol_gapply/dataTables.bootstrap4',\n        'enrol_gapply/dataTables.select',\n        'enrol_gapply/select.bootstrap4',\n        'enrol_gapply/dataTables.buttons',\n        'enrol_gapply/buttons.bootstrap4',\n        'enrol_gapply/buttons.html5',\n        'enrol_gapply/dataTables.rowGroup',\n        'enrol_gapply/rowGroup.bootstrap4',\n        'enrol_gapply/buttons.colVis',\n    ], function($, JSZip, toast) {\n        window.JSZip = JSZip;\n        return {\n            init: function(tab, id) {\n                $('body').append(`<div id=\"enrol-gapply-loading\" class=\"d-none align-items-center justify-content-center\n                     position-fixed w-100 h-100\"\n    style=\"top: 0;bottom: 0; left: 0; right: 0; z-index: 9999; background: rgba(0,0,0,0.5);\">\n    <div class=\"spinner-grow text-light\" style=\"width: 3rem; height: 3rem;\" role=\"status\">\n    <span class=\"sr-only\">Loading...</span></div></div>`);\n\n                $(document).on('click', 'a[data-type]', function() {\n                    let modal = `<div class=\"modal fade\" id=\"applyfile\" data-backdrop=\"static\"\n                     data-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"applyfileLabel\" aria-modal=\"true\" role=\"dialog\">\n                            <div class=\"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable\">\n                                <div class=\"modal-content\">\n                                    <div class=\"modal-header\">\n                                        <h5 class=\"modal-title\" id=\"applyfileLabel\"></h5>\n                                        <button class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                        <i class=\"fa fa-times\" aria-hidden=\"true\"></i>\n                                        </button>\n                                    </div>\n                                    <div class=\"modal-body p-0 text-center d-flex justify-content-center\">\n                                    </div>\n                                    <div class=\"modal-footer\">\n                                        <a href=\"javascript:void(0)\" id=\"forcedownloadbutton\"\n                                            class=\"btn btn-primary text-uppercase font-weight-bold\">\n                                            ${M.util.get_string(\"download\", \"enrol_gapply\")}</a>\n                                        <button class=\"btn btn-secondary text-uppercase font-weight-bold\"\n                                            data-dismiss=\"modal\">${M.util.get_string(\"close\", \"enrol_gapply\")}</button>\n                                    </div>\n                                </div>\n                            </div>\n                    </div>`;\n                    // Remove existing modal.\n                    $(\"#applyfile\").remove();\n                    $(\"body\").append(modal);\n                    $(\"#applyfileLabel\").html($(this).text());\n                    $(\"#applyfile\").modal(\"show\");\n                    let html = \"\";\n                    if ($(this).data(\"type\").includes(\"image\")) {\n                        html = `<img src=\"${$(this).data(\"url\")}\" class=\"img-fluid mx-auto\">`;\n                        $(\"#applyfile .modal-body\").removeClass(\"d-flex\");\n                    } else if ($(this).data(\"type\").includes(\"video\")) {\n                        html = `<video src=\"${$(this).data(\"url\")}\"\n                    class=\"embed-responsive-item text-center m-0\" controls width=\"100%\" autoplay></video>`;\n                    } else if ($(this).data(\"type\").includes(\"audio\")) {\n                        html = `<audio src=\"${$(this).data(\"url\")}\"\n                    class=\"embed-responsive-item text-center m-0\" controls width=\"100%\" autoplay></audio>`;\n                    } else if ($(this).data(\"type\").includes(\"pdf\")) {\n                        html = `<object data=\"${$(this).data(\"url\")}\" type=\"application/pdf\" width=\"100%\" style=\"height: 80vh\">\n                        <p>${M.util.get_string('cannotopenpdffile', 'enrol_gapply', $(this).data(\"url\"))}</p></object>`;\n                    } else if ($(this).data(\"type\").includes(\"officedocument\") || $(this).data(\"type\").includes(\"msword\")\n                        || $(this).data(\"type\").includes(\"ms-excel\")\n                        || $(this).data(\"type\").includes(\"ms-powerpoint\")\n                        || $(this).data(\"type\").includes(\"openxmlformats\")) {\n                        html = `<iframe id=\"fileviewer\"\n                        src=\"https://view.officeapps.live.com/op/embed.aspx?src=${$(this).data(\"url\")}\"\n                        class=\"embed-responsive-item\" style=\"width: 100%; height: 80vh\"></iframe>`;\n                    } else if ($(this).data(\"type\").includes(\"text\") || $(this).data(\"type\").includes(\"csv\")) {\n                        html = `<iframe id=\"fileviewer\"\n                    src=\"https://docs.google.com/viewer?url=${$(this).data(\"url\")}&embedded=true\"\n                    class=\"embed-responsive-item\" style=\"width: 100%; height: 80vh; border-radius: 0\"></iframe>`;\n                    } else {\n                        html = `<p class=\"text-center py-5\">${M.util.get_string('cannotopenfile', 'enrol_gapply',\n                            $(this).data(\"url\"))}</p>`;\n                        $(\"#applyfile .modal-body\").removeClass(\"d-flex\");\n                    }\n                    $(\"#applyfile .modal-body\").html(html);\n\n                    let newURL = new URL($(this).data(\"url\"));\n\n                    $(\"#applyfile\").on(\"click\", \"#forcedownloadbutton\", function() {\n                        newURL.searchParams.append(\"forcedownload\", 1);\n                        window.open(newURL.toString());\n                    });\n                });\n\n                const timecreatedIndex = $(\"th\").index($(\"th.timecreated\"));\n                let profileFields = [];\n\n                $(\"th.profilefield\").each(function() {\n                    const pr = {\n                        index: $(\"th\").index($(this)),\n                        text: $(this).text(),\n                    };\n                    profileFields.push(pr);\n                });\n\n                const renderFilterBox = (index, text) => {\n                    return `<div class=\"col-sm-6 col-md-4 col-lg-3 col-xl-2 pl-0 pr-2\">\n                            <div class=\"form-group mb-1\">\n                                <label for=\"filter-${index}\">${text}</label>\n                                <input type=\"text\" class=\"form-control form-control-sm\" id=\"filter-${index}\" data-index=\"${index}\"/>\n                            </div>\n                        </div>`;\n                };\n\n                let option = {\n                    ajax: {\n                        url: M.cfg.wwwroot\n                            + `/enrol/gapply/ajax.php?id=${id}&action=getapplications&tab=${tab}&sesskey=${M.cfg.sesskey}`,\n                        dataSrc: function(json) {\n                            return json;\n                        },\n                    },\n                    deferRender: true,\n                    rowId: 'id',\n                    dom: `<'d-flex align-items-start justify-content-between'<'d-flex align-items-start'Bl>f>\n                    <'#filterregion.w-100 row'>t<'row'<'col-sm-6'i><'col-sm-6'p>>`,\n                    buttons: [\n                        {\n                            extend: \"copyHtml5\",\n                            text: '<i class=\"fa fa-copy fa-fw\"></i>',\n                            titleAttr: \"\",\n                            className: \"btn btn-sm btn-alt-primary\",\n                            messageTop: null,\n                            title: null,\n                            exportOptions: {\n                                columns: ['.exportable']\n                            }\n                        },\n                        {\n                            extend: \"csvHtml5\",\n                            text: '<i class=\"fa fa-file-code-o fa-fw\"></i>',\n                            titleAttr: \"\",\n                            className: \"btn btn-sm btn-alt-primary\",\n                            exportOptions: {\n                                columns: ['.exportable']\n                            }\n                        },\n                        {\n                            extend: \"excelHtml5\",\n                            text: '<i class=\"fa fa-file-excel-o fa-fw\"></i>',\n                            titleAttr: \"\",\n                            className: \"btn btn-sm btn-alt-primary\",\n                            exportOptions: {\n                                columns: ['.exportable']\n                            }\n                        },\n                        {\n                            extend: \"colvis\",\n                            text: '<i class=\"fa fa-columns fa-fw\"></i>',\n                            titleAttr: \"\",\n                            className: \"btn btn-sm btn-alt-primary\",\n                            columns: '.colvis'\n                        },\n                    ],\n                    \"language\": {\n                        \"lengthMenu\": \"_MENU_\",\n                        \"zeroRecords\": M.util.get_string('nofound', \"enrol_gapply\"),\n                        \"search\": M.util.get_string('search', \"enrol_gapply\"),\n                        \"info\": M.util.get_string('datatableinfo', \"enrol_gapply\"),\n                        \"infoEmpty\": M.util.get_string('datatableinfoempty', \"enrol_gapply\"),\n                        \"infoFiltered\": M.util.get_string('datatableinfofiltered', \"enrol_gapply\"),\n                        \"paginate\": {\n                            \"first\": M.util.get_string('first', 'enrol_gapply'),\n                            \"last\": M.util.get_string('last', 'enrol_gapply'),\n                            \"next\": M.util.get_string('next', 'enrol_gapply'),\n                            \"previous\": M.util.get_string('previous', 'enrol_gapply')\n                        },\n                        select: {\n                            rows: {\n                                _: M.util.get_string('rowsselected', 'enrol_gapply'),\n                            }\n                        }\n                    },\n                    \"order\": [[timecreatedIndex, \"desc\"]],\n                    \"columnDefs\": [{\n                        orderable: false,\n                        className: 'select-checkbox',\n                        targets: 0,\n                        visible: $(\"#gapplytable\").hasClass(\"approved\") ? false : true\n                    },\n                    {\n                        targets: 'userdetails',\n                        className: 'text-truncate',\n                    },\n                    {\n                        \"targets\": 'inv',\n                        \"visible\": false,\n                    },\n                    {\n                        'targets': 'noorder',\n                        'orderable': false,\n                    }\n                    ],\n                    'initComplete': function() {\n                        // Wrap the table in a div with overflow-x:auto\n                        $('#gapplytable').wrap('<div style=\"overflow-x:auto;\"></div>');\n                        $('.dataTables_length').addClass('mx-1');\n                        $('#gapplytable').addClass('mx-n1');\n                        $('.table-responsive').css('overflow', 'visible');\n                        // Remove d-none class\n                        $('#gapplytable').removeClass('d-none');\n                        $(\".dataTables_filter\").addClass(\"d-flex align-items-start float-right\");\n                        $(`<a class=\"btn btn-sm btn-secondary font-weight-bold ml-1\"\n                             href=\"javascript:void(0)\" id=\"filters\" data-toggle=\"tooltip\"\n                             title=\"Filter\"><i class=\"fa fa-filter left fa-fw\"></i></a>`).insertAfter(\".dataTables_filter label\");\n                        $(document).off('click', '#filters').on('click', '#filters', function() {\n                            $('#filterregion').slideToggle('fast', 'swing');\n                        });\n                        $('#filterregion').css('display', 'none');\n                        profileFields.forEach((element) => {\n                            $(renderFilterBox(element.index, element.text)).appendTo(\"#filterregion\");\n                        });\n                        // Create sort dropdown\n                        $(`<div class=\"dropdown d-inline right small\">\n                    <button class=\"btn btn-sm btn-secondary dropdown-toggle font-weight-bold ml-1\"\n                     id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                     <i class=\"fa fa-sort fa-fw\"></i>\n                    </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" id=\"sortdropdown\" aria-labelledby=\"dropdownMenuButton\">\n                    </div></div>`).insertAfter(\"#filters\");\n                        profileFields.forEach((element) => {\n                            $('#sortdropdown').append(`<a class=\"dropdown-item\" href=\"javascript:void(0)\"\n                                 data-col=\"${element.index}\">${element.text}</a>`);\n                        });\n                        $('#sortdropdown').append(`<a class=\"dropdown-item\" href=\"javascript:void(0)\"\n                             data-col=\"${timecreatedIndex}\">${M.util.get_string('timecreated', 'enrol_gapply')}</a>\n                             <div class=\"dropdown-divider\"></div>\n                        <a class=\"dropdown-item active\" href=\"javascript:void(0)\"\n                         data-order=\"desc\">${M.util.get_string('desc', \"enrol_gapply\")}</a>\n                        <a class=\"dropdown-item\" href=\"javascript:void(0)\" data-order=\"asc\">\n                        ${M.util.get_string('asc', \"enrol_gapply\")}</a>`);\n                    },\n                };\n\n                if (!$(\"#gapplytable\").hasClass(\"approved\")) {\n                    option.select = {\n                        style: 'os',\n                        selector: 'td:first-child'\n                    };\n                }\n\n                let table = $('#gapplytable').DataTable(option);\n\n                // Handle filter event\n                $('body').on('keyup', '#filterregion input', function() {\n                    const index = $(this).data('index');\n                    const value = $(this).val();\n                    table.column(index).search(value, false, true).draw();\n                });\n\n                // Handle sort event\n                $(\"body\").on(\"click\", \"#sortdropdown.dropdown-menu a\", function() {\n                    // If sort order is selected\n                    if ($(this).data(\"order\")) {\n                        // Remove active class from all sort order options\n                        $(\".dropdown-menu a[data-order]\").removeClass(\"active\");\n                        // Add active class to the selected sort order option\n                        $(this).addClass(\"active\");\n                        // Set the sort order to the selected sort order\n                    } else {\n                        // If sort column is selected\n                        // remove active class from all sort column options\n                        $(\".dropdown-menu a[data-col]\").removeClass(\"active\");\n                        // Add active class to the selected sort column option\n                        $(this).addClass(\"active\");\n                        // Set the sort column to the selected sort column\n                    }\n                    // Get the sort column\n                    const colIndex = $(\".dropdown-menu a[data-col].active\").data(\"col\");\n                    // Get the sort order\n                    const order = $(\".dropdown-menu a[data-order].active\").data(\"order\");\n                    // Sort the table\n                    table.order([colIndex, order]).draw();\n                });\n\n                let selecteddata;\n\n                let getRowData = (table) => {\n                    $(\".action-button:not(.menu-action)\").remove();\n                    selecteddata = table.rows({selected: true}).data().toArray().map(row => row[1]);\n                    if (selecteddata.length > 0) {\n                        $(\"#gapplytable_length label\").after(`\n                            <button class=\"btn btn-sm alert-success action-button\" data-action=\"approve\" data-toggle=\"tooltip\"\n                             title=\"${M.util.get_string(\"approve\", \"enrol_gapply\")}\"><i class=\"fa fa-fw fa-check\"></i></button>\n                            <button class=\"btn btn-sm alert-info action-button\" data-action=\"waitlist\" data-toggle=\"tooltip\"\n                             title=\"${M.util.get_string(\"waitlist\", \"enrol_gapply\")}\"><i class=\"fa fa-fw fa-clock-o\"></i></button>\n                            <button class=\"btn btn-sm alert-warning action-button\" data-action=\"reject\" data-toggle=\"tooltip\"\n                             title=\"${M.util.get_string(\"reject\", \"enrol_gapply\")}\"><i class=\"fa fa-fw fa-times\"></i></button>\n                            <button class=\"btn btn-sm alert-danger action-button\" data-action=\"delete\" data-toggle=\"tooltip\"\n                             title=\"${M.util.get_string(\"delete\", \"enrol_gapply\")}\"><i class=\"fa fa-fw fa-trash\"></i></button>`\n                        );\n                    } else {\n                        $(\".action-button:not(.menu-action)\").remove();\n                    }\n                };\n\n                table.on('select', function(e, dt, type, indexes) {\n                    getRowData(dt, indexes);\n                });\n                table.on('deselect', function(e, dt, type, indexes) {\n                    getRowData(dt, indexes);\n                });\n\n                $(document).on('click', '.action-button', async function() {\n                    const action = $(this).data(\"action\");\n                    let primarybutton = \"btn-success\";\n                    if (action == \"waitlist\") {\n                        primarybutton = \"btn-info\";\n                    } else if (action == \"reject\") {\n                        primarybutton = \"btn-warning\";\n                    } else if (action == \"delete\") {\n                        primarybutton = \"btn-danger\";\n                    }\n                    let $this = $(this);\n                    if ($this.hasClass(\"menu-action\")) {\n                        selecteddata = [$this.data(\"id\")];\n                    }\n\n                    // If action is approve, we have to get groups and assignable roleids.\n                    let groups = [];\n                    let rolesanddates;\n                    let roleoptions = \"\";\n                    let groupoptions = \"\";\n                    let startdate = \"\";\n                    let enddate = \"\";\n                    if (action == \"approve\") {\n                        // Get list of groups as a promise\n                        groups = await $.ajax({\n                            method: \"POST\",\n                            url: M.cfg.wwwroot + \"/enrol/gapply/ajax.php\",\n                            data: {\n                                action: \"getgroups\",\n                                id: $(\"#gapplytable\").data(\"instance\"),\n                                sesskey: M.cfg.sesskey,\n                            },\n                            dataType: \"json\",\n                        });\n                        // Get list of roles as a promise\n                        rolesanddates = await $.ajax({\n                            method: \"POST\",\n                            url: M.cfg.wwwroot + \"/enrol/gapply/ajax.php\",\n                            data: {\n                                action: \"getrolesanddates\",\n                                id: $(\"#gapplytable\").data(\"instance\"),\n                                sesskey: M.cfg.sesskey\n                            },\n                            dataType: \"json\",\n                        });\n\n                        if (groups.length > 0) {\n                            groups.forEach(function(group) {\n                                // Render checkbox.\n                                groupoptions += `<div class=\"custom-control custom-checkbox\">\n                                                    <input type=\"checkbox\" class=\"custom-control-input groups\"\n                                                    id=\"group-${group.id}\" name=\"groups[]\" value=\"${group.id}\">\n                                                <label class=\"custom-control-label\" for=\"group-${group.id}\">${group.name}</label>\n                                                </div>`;\n                            });\n\n                            groupoptions = `<div class=\"form-group mt-3\">\n                                                    <label for=\"groups\">${M.util.get_string('assigngroups', 'enrol_gapply')}</label>\n                                                    <div id=\"groups\">${groupoptions}</div>\n                                                </div>`;\n                        }\n                        const roles = rolesanddates.roles;\n                        const roleids = Object.keys(roles);\n                        if (roleids.length > 0) {\n                            roleoptions = `<div class=\"form-group mt-3\">\n                                        <label for=\"role\">${M.util.get_string('assignrole', 'enrol_gapply')}</label>\n                                        <select class=\"custom-select w-100\" id=\"role\" name=\"role\">`;\n                            roleids.forEach(function(roleid) {\n                                // Render select.\n                                roleoptions += `<option value=\"${roleid}\"\n                             ${roleid == rolesanddates.defaultrole ? 'selected' : ''}>${roles[roleid]}</option>`;\n                            });\n                            roleoptions += `</select></div>`;\n                        }\n\n                        let start = rolesanddates.startdate > 0 ?\n                            new Date(rolesanddates.startdate * 1000) : \"\";\n                        if (start != \"\") {\n                            start = start.getFullYear() + \"-\"\n                                + (\"0\" + (start.getMonth() + 1)).slice(-2)\n                                + \"-\" + (\"0\" + start.getDate()).slice(-2)\n                                + \"T\" + (\"0\" + start.getHours()).slice(-2) + \":\" + (\"0\" + start.getMinutes()).slice(-2);\n                        }\n                        startdate = `<div class=\"form-group mt-3\">\n                                        <label for=\"startdate\">${M.util.get_string('startdate', 'enrol_gapply')}</label>\n                                        <input type=\"datetime-local\" class=\"form-control w-100\"\n                                        id=\"startdate\" name=\"startdate\" value=\"${start}\">\n                                        </div>`;\n\n                        let end = rolesanddates.enddate > 0 ? new Date(rolesanddates.enddate * 1000) : \"\";\n                        if (end != \"\") {\n                            end = end.getFullYear() + \"-\"\n                                + (\"0\" + (end.getMonth() + 1)).slice(-2)\n                                + \"-\" + (\"0\" + end.getDate()).slice(-2)\n                                + \"T\" + (\"0\" + end.getHours()).slice(-2) + \":\" + (\"0\" + end.getMinutes()).slice(-2);\n                        }\n                        enddate = `<div class=\"form-group mt-3\">\n                                        <label for=\"startdate\">\n                                        ${M.util.get_string('enddate', 'enrol_gapply')}</label>\n                                        <input type=\"datetime-local\" class=\"form-control w-100\"\n                                        id=\"enddate\" name=\"enddate\" value=\"${end}\">\n                                        </div>`;\n                    }\n\n                    let modal = `<div class=\"modal fade\" id=\"approveModal\" tabindex=\"-1\" role=\"dialog\"\n                         aria-labelledby=\"approveModalLabel\"  aria-hidden=\"true\" style=\"background: rgba(0,0,0,0.5);\">\n                                    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n                                        <div class=\"modal-content\">\n                                            <div class=\"modal-header\">\n                                                <h5 class=\"modal-title\" id=\"approveModalLabel\">\n                                                ${M.util.get_string(action + 'applications', 'enrol_gapply')}</h5>\n                                                <button class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                                <i class=\"fa fa-fw fa-times\"></i>\n                                                </button>\n                                                </div>\n                                            <div class=\"modal-body\">\n                                            <p class=\"mb-0\">${M.util.get_string('areyousureyouwantto' + action, 'enrol_gapply')}</p>\n                                                ${roleoptions}\n                                                ${startdate}\n                                                ${enddate}\n                                                ${groupoptions}\n                                            </div>\n                                            <div class=\"modal-footer\">\n                                                <button class=\"btn btn-secondary text-uppercase font-weight-bold\"\n                                                 data-dismiss=\"modal\">${M.util.get_string('cancel', 'enrol_gapply')}</button>\n                                                <button class=\"btn ${primarybutton} text-uppercase font-weight-bold\"\n                                                 id=\"proceed\">${M.util.get_string('proceed', 'enrol_gapply')}</button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>`;\n                    // Remove any existing modal\n                    $(\"#approveModal\").remove();\n                    $(\"body\").append(modal);\n                    $(\"#approveModal\").modal(\"show\");\n\n                    // Approve.\n                    $(\"#approveModal #proceed\").click(function() {\n                        $(\"#approveModal\").modal(\"hide\");\n                        $(\"#enrol-gapply-loading\").toggleClass(\"d-none d-flex\");\n                        $.ajax({\n                            url: M.cfg.wwwroot + \"/enrol/gapply/ajax.php\",\n                            method: \"POST\",\n                            dataType: \"text\",\n                            data: {\n                                action: action,\n                                ids: selecteddata.toString(),\n                                id: $(\"#gapplytable\").data(\"instance\"),\n                                groups: $(\"#approveModal input.groups:checked\").map(function() {\n                                    return this.value;\n                                }).get().toString(),\n                                roleid: $(\"#approveModal select#role\").val(),\n                                start: $(\"#approveModal input#startdate\").val() != '' ?\n                                    new Date($(\"#approveModal input#startdate\").val()).getTime() / 1000 : 0,\n                                end: $(\"#approveModal input#enddate\").val() != '' ?\n                                    new Date($(\"#approveModal input#enddate\").val()).getTime() / 1000 : 0,\n                                sesskey: M.cfg.sesskey,\n                            },\n                            success: function(response) {\n                                window.console.log(response);\n                                if (response == \"success\") {\n                                    selecteddata.forEach(function(id) {\n                                        table.row($(`[data-id=\"${id}\"]`).closest(\"tr\")).remove().draw();\n                                    });\n                                    toast.add(M.util.get_string(action + 'success', 'enrol_gapply'), {\n                                        type: 'success',\n                                    });\n                                } else {\n                                    toast.add(M.util.get_string('anerroroccurred', 'enrol_gapply'), {\n                                        type: 'danger',\n                                    });\n                                }\n                            },\n                            error: function() {\n                                toast.add(M.util.get_string('anerroroccurred', 'enrol_gapply'), {\n                                    type: 'danger',\n                                });\n                            },\n                            complete: function() {\n                                $(\"#enrol-gapply-loading\").toggleClass(\"d-none d-flex\");\n                                $('#userdetailModal').modal('hide');\n                                // Unselect all rows\n                                table.rows().deselect();\n                            }\n                        });\n                    });\n                });\n\n                $(document).on('click', '.showuserdetail', function() {\n                    $(\"#enrol-gapply-loading\").toggleClass(\"d-none d-flex\");\n                    const userid = $(this).data(\"userid\");\n                    const applicationid = $(this).data(\"id\");\n                    const status = $(this).data(\"statusformatted\");\n                    const sts = $(this).data(\"status\");\n                    selecteddata = [applicationid];\n                    const applicationtext = $(\".applicationtext[data-id='\" + applicationid + \"']\").html();\n                    let attachments = [];\n                    $('#gapplytable a.attachmentlink[data-id=\"' + applicationid + '\"]').each(function() {\n                        const file = {\n                            'link': $(this).data('url'),\n                            'filename': $(this).text(),\n                            'type': $(this).data('type'),\n                        };\n                        attachments.push(file);\n                    });\n                    let select = \"\";\n                    if (attachments.length > 0) {\n                        // Select input\n                        select = `<select class=\"custom-select w-100 my-2\" id=\"fileselect\">`;\n                        attachments.forEach(function(attachment) {\n                            select += `<option data-type=\"${attachment.type}\"\n                             value=\"${attachment.link}\">${attachment.filename}</option>`;\n                        });\n                        select += `</select>`;\n                    }\n\n                    // AJAX request to get user details.\n                    $.ajax({\n                        url: M.cfg.wwwroot\n                            + `/enrol/gapply/ajax.php?action=getuserbyid&id=${id}&userid=${userid}&sesskey=${M.cfg.sesskey}`,\n                        type: 'GET',\n                        dataType: 'text',\n                        success: function(response) {\n                            let modal = `<div class=\"modal fade p-0\" id=\"userdetailModal\" tabindex=\"-1\" role=\"dialog\"\n                             aria-labelledby=\"userdetailModalLabel\" aria-hidden=\"true\">\n                            <div class=\"modal-dialog modal-xl\" role=\"document\" style=\"max-width: calc(100% - 2rem);\">\n                                <div class=\"modal-content\">\n                                ${response}\n                                </div>\n                            </div>\n                        </div>`;\n                            $(\"#userdetailModal\").remove();\n                            $(\"body\").append(modal);\n                            $(\"#userdetailModal\").modal(\"show\");\n                            if (sts == \"approved\") {\n                                $(\"#userdetailModal .action-button\").remove();\n                            }\n\n                            $(\"#userdetailModal .select-input\").html(select);\n                            $(\"#userdetailModal #applicationtext\").html(applicationtext);\n                            $(\"#userdetailModal #currentstatus\").html(status);\n\n                            let changefile = function(url, type, name) {\n                                $(\".fileview #viewer\").html(name);\n                                let html = '';\n                                if (type.includes(\"image\")) {\n                                    html = `<img src=\"${url}\" class=\"img-fluid mx-auto\">`;\n                                } else if (type.includes(\"video\")) {\n                                    html = `<video src=\"${url}\" class=\"embed-responsive-item text-center m-0\"\n                                     controls width=\"100%\" autoplay></video>`;\n                                } else if (type.includes(\"audio\")) {\n                                    html = `<audio src=\"${url}\" class=\"embed-responsive-item text-center m-0\" controls width=\"100%\"\n                                     autoplay></audio>`;\n                                } else if (type.includes(\"pdf\")) {\n                                    html = `<object data=\"${url}\" type=\"application/pdf\" width=\"100%\"\n                                     style=\"height: calc(100% - 7px);\"><p>${M.util.get_string('cannotopenpdffile',\n                                        'enrol_gapply', url)}</p></object>`;\n                                } else if (type.includes(\"officedocument\") || type.includes(\"msword\")\n                                    || type.includes(\"ms-excel\") || type.includes(\"ms-powerpoint\")\n                                    || type.includes(\"openxmlformats\")) {\n                                    html = `<iframe id=\"fileviewer\"\n        src=\"https://view.officeapps.live.com/op/embed.aspx?src=${url}\"\n        class=\"embed-responsive-item\" style=\"width: 100%; height: calc(100% - 7px);\"></iframe>`;\n                                } else if (type.includes(\"text\") || type.includes(\"csv\")) {\n                                    html = `<iframe id=\"fileviewer\"\n        src=\"https://docs.google.com/viewer?url=${url}&embedded=true\"\n        class=\"embed-responsive-item\" style=\"width: 100%; height:  calc(100% - 7px); border-radius: 0\"></iframe>`;\n                                } else {\n                                    html = `<p class=\"text-center py-5\">\n                                    ${M.util.get_string('cannotopenfile', 'enrol_gapply', url)}</p>`;\n                                }\n                                $(\".fileview #viewer\").html(html);\n                                $(\"#userdetailmodalLabel\").html(name);\n                                $(\"#downloadbutton\").attr(\"href\", url);\n                            };\n\n                            $(\"#fileselect\").change(function() {\n                                changefile($(this).val(), $(this).find(\":selected\").data(\"type\"), $(this).find(\":selected\").text());\n                            });\n\n                            $(\"#fileselect\").trigger(\"change\");\n                        },\n                        error: function() {\n                            toast.add(M.util.get_string('anerroroccurred', 'enrol_gapply'), {\n                                type: 'danger'\n                            });\n                        },\n                        complete: function() {\n                            $(\"#enrol-gapply-loading\").toggleClass(\"d-none d-flex\");\n                        }\n                    });\n                });\n\n                $(document).on('click', '#selectall', function() {\n                    if ($(this).is(\":checked\")) {\n                        table.rows({\n                            search: 'applied'\n                        }).select();\n                    } else {\n                        table.rows().deselect();\n                    }\n                });\n            }\n        };\n    });"],"names":["define","$","JSZip","toast","window","init","tab","id","append","document","on","modal","M","util","get_string","remove","html","this","text","data","includes","removeClass","newURL","URL","searchParams","open","toString","timecreatedIndex","index","profileFields","each","pr","push","option","ajax","url","cfg","wwwroot","sesskey","dataSrc","json","deferRender","rowId","dom","buttons","extend","titleAttr","className","messageTop","title","exportOptions","columns","select","rows","_","orderable","targets","visible","hasClass","wrap","addClass","css","insertAfter","off","slideToggle","forEach","element","appendTo","style","selector","selecteddata","table","DataTable","value","val","column","search","draw","colIndex","order","getRowData","selected","toArray","map","row","length","after","e","dt","type","indexes","async","action","primarybutton","$this","rolesanddates","groups","roleoptions","groupoptions","startdate","enddate","method","dataType","group","name","roles","roleids","Object","keys","roleid","defaultrole","start","Date","getFullYear","getMonth","slice","getDate","getHours","getMinutes","end","click","toggleClass","ids","get","getTime","success","response","console","log","closest","add","error","complete","deselect","userid","applicationid","status","sts","applicationtext","attachments","file","attachment","link","filename","change","attr","changefile","find","trigger","is"],"mappings":"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"}